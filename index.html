<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Analog Code Challenge - Gaming Edition</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Exo+2:wght@300;400;600;700&display=swap');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        :root {
            --pastel-pink: #FDD6ED;
            --sunset: #AE9B91;
            --fuchsia: #C764A1;
            --desert: #D6BDAC;
            --violet: #7E3FEF;
            --blue: #2A1AFF;
            --dark-text: #2D2B2D;
            --light-text: #FFFFFF;
        }
        
        body {
            font-family: 'Exo 2', sans-serif;
            background: linear-gradient(135deg, var(--pastel-pink) 0%, var(--sunset) 50%, var(--fuchsia) 100%);
            min-height: 100vh;
            overflow-x: hidden;
            color: var(--dark-text);
            position: relative;
        }
        
        /* Animated background particles */
        .bg-particles {
            position: fixed;
            width: 100%;
            height: 100%;
            overflow: hidden;
            z-index: -1;
        }
        
        .particle {
            position: absolute;
            background: rgba(126, 63, 239, 0.1);
            border-radius: 50%;
            animation: float 6s ease-in-out infinite;
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0px) rotate(0deg); opacity: 0.1; }
            50% { transform: translateY(-20px) rotate(180deg); opacity: 0.3; }
        }
        
        .game-container {
            background: rgba(253, 214, 237, 0.95);
            border-radius: 20px;
            backdrop-filter: blur(20px);
            border: 2px solid var(--fuchsia);
            box-shadow: 0 0 50px rgba(199, 100, 161, 0.3);
            max-width: 1200px;
            width: 95%;
            margin: 20px auto;
            overflow: hidden;
            position: relative;
        }
        
        .header {
            background: linear-gradient(135deg, var(--violet), var(--blue));
            color: var(--light-text);
            padding: 30px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }
        
        .header::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(253, 214, 237, 0.2), transparent);
            animation: scan 3s linear infinite;
        }
        
        @keyframes scan {
            0% { left: -100%; }
            100% { left: 100%; }
        }
        
        .header h1 {
            font-family: 'Orbitron', monospace;
            font-size: 2.8em;
            margin-bottom: 10px;
            font-weight: 900;
            text-transform: uppercase;
            letter-spacing: 3px;
            text-shadow: 0 0 20px rgba(253, 214, 237, 0.8);
            z-index: 2;
            position: relative;
        }
        
        .header p {
            font-size: 1.2em;
            opacity: 0.9;
            z-index: 2;
            position: relative;
        }
        
        .hud {
            background: rgba(214, 189, 172, 0.9);
            padding: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 2px solid var(--fuchsia);
            position: relative;
        }
        
        .character-avatar {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            border: 3px solid var(--fuchsia);
            background: linear-gradient(135deg, var(--violet), var(--blue));
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2.5em;
            position: relative;
            animation: pulse 2s ease-in-out infinite;
        }
        
        @keyframes pulse {
            0%, 100% { box-shadow: 0 0 20px rgba(199, 100, 161, 0.3); }
            50% { box-shadow: 0 0 40px rgba(199, 100, 161, 0.7); }
        }
        
        .player-info {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }
        
        .player-name {
            font-family: 'Orbitron', monospace;
            font-weight: 700;
            color: var(--violet);
            font-size: 1.2em;
        }
        
        .player-title {
            color: var(--sunset);
            font-size: 0.9em;
        }
        
        .coin-display {
            display: flex;
            align-items: center;
            gap: 15px;
            background: rgba(126, 63, 239, 0.1);
            padding: 15px 25px;
            border-radius: 15px;
            border: 2px solid var(--violet);
        }
        
        .coin-icon {
            width: 50px;
            height: 50px;
            background: radial-gradient(circle, var(--fuchsia), var(--violet));
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 1.5em;
            color: var(--light-text);
            animation: rotate 4s linear infinite;
        }
        
        @keyframes rotate {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        
        .coin-amount {
            font-family: 'Orbitron', monospace;
            font-size: 1.8em;
            font-weight: 700;
            color: var(--violet);
            text-shadow: 0 0 10px rgba(126, 63, 239, 0.5);
        }
        
        .progress-section {
            display: flex;
            flex-direction: column;
            gap: 10px;
            min-width: 200px;
        }
        
        .progress-label {
            color: var(--violet);
            font-weight: 600;
            text-align: center;
        }
        
        .progress-bar {
            background: rgba(126, 63, 239, 0.1);
            border-radius: 10px;
            height: 12px;
            border: 1px solid var(--violet);
            overflow: hidden;
        }
        
        .progress-fill {
            background: linear-gradient(90deg, var(--fuchsia), var(--blue));
            height: 100%;
            transition: width 0.8s ease;
            box-shadow: 0 0 10px rgba(126, 63, 239, 0.5);
        }
        
        .content {
            padding: 40px;
            min-height: 500px;
            position: relative;
        }
        
        .screen {
            display: none;
            animation: fadeIn 0.5s ease-in;
        }
        
        .screen.active {
            display: block;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .welcome-screen {
            text-align: center;
            background: rgba(214, 189, 172, 0.7);
            border-radius: 20px;
            padding: 40px;
            border: 2px solid var(--fuchsia);
        }
        
        .welcome-title {
            font-family: 'Orbitron', monospace;
            font-size: 2.5em;
            color: var(--violet);
            margin-bottom: 30px;
            text-shadow: 0 0 20px rgba(126, 63, 239, 0.5);
        }
        
        .character-selection {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin: 40px 0;
        }
        
        .character-option {
            cursor: pointer;
            padding: 20px;
            border-radius: 15px;
            border: 2px solid var(--fuchsia);
            background: rgba(253, 214, 237, 0.3);
            transition: all 0.3s ease;
            text-align: center;
            min-width: 150px;
        }
        
        .character-option:hover {
            border-color: var(--violet);
            background: rgba(126, 63, 239, 0.1);
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(126, 63, 239, 0.2);
        }
        
        .character-option.selected {
            border-color: var(--blue);
            background: rgba(42, 26, 255, 0.1);
        }
        
        .character-icon {
            width: 80px;
            height: 80px;
            margin: 0 auto 15px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2.5em;
            background: linear-gradient(135deg, var(--violet), var(--blue));
        }
        
        .character-name {
            font-family: 'Orbitron', monospace;
            font-weight: 700;
            color: var(--violet);
            margin-bottom: 5px;
        }
        
        .character-role {
            color: var(--sunset);
            font-size: 0.9em;
        }
        
        .scenario-card {
            background: rgba(0, 30, 60, 0.8);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            border: 2px solid rgba(0, 255, 255, 0.3);
            position: relative;
            overflow: hidden;
        }
        
        .scenario-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, #00ffff, #0080ff, #00ffff);
            animation: glow 2s ease-in-out infinite alternate;
        }
        
        @keyframes glow {
            from { opacity: 0.5; }
            to { opacity: 1; }
        }
        
        .scenario-title {
            font-family: 'Orbitron', monospace;
            color: #00ffff;
            margin-bottom: 20px;
            font-size: 1.4em;
            font-weight: 700;
        }
        
        .scenario-text {
            line-height: 1.6;
            margin-bottom: 20px;
            color: #e0e0e0;
        }
        
        .scenario-quote {
            background: rgba(0, 255, 255, 0.1);
            border-left: 4px solid #00ffff;
            padding: 20px;
            font-style: italic;
            border-radius: 0 10px 10px 0;
            margin: 20px 0;
            color: #fff;
        }
        
        .choices-grid {
            display: grid;
            gap: 20px;
            margin-top: 30px;
        }
        
        .choice-card {
            background: rgba(0, 20, 40, 0.7);
            border: 2px solid rgba(0, 255, 255, 0.2);
            border-radius: 15px;
            padding: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .choice-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(0, 255, 255, 0.1), transparent);
            transition: left 0.5s;
        }
        
        .choice-card:hover::before {
            left: 100%;
        }
        
        .choice-card:hover {
            border-color: #00ffff;
            transform: translateX(10px);
            box-shadow: 0 5px 25px rgba(0, 255, 255, 0.2);
        }
        
        .choice-card.selected {
            border-color: #ffd700;
            background: rgba(255, 215, 0, 0.1);
            transform: translateX(10px);
        }
        
        .choice-letter {
            font-family: 'Orbitron', monospace;
            font-weight: 700;
            color: #00ffff;
            font-size: 1.3em;
            margin-right: 15px;
        }
        
        .choice-text {
            color: #e0e0e0;
            position: relative;
            z-index: 2;
        }
        
        .betting-arena {
            background: rgba(40, 20, 60, 0.8);
            border-radius: 20px;
            padding: 30px;
            border: 2px solid rgba(255, 100, 255, 0.3);
            margin: 30px 0;
            position: relative;
        }
        
        .betting-arena::before {
            content: '⚡';
            position: absolute;
            top: 15px;
            right: 20px;
            font-size: 2em;
            color: rgba(255, 100, 255, 0.5);
            animation: spark 1.5s ease-in-out infinite;
        }
        
        @keyframes spark {
            0%, 100% { transform: scale(1) rotate(0deg); opacity: 0.5; }
            50% { transform: scale(1.2) rotate(180deg); opacity: 1; }
        }
        
        .betting-title {
            font-family: 'Orbitron', monospace;
            color: #ff64ff;
            font-size: 1.5em;
            margin-bottom: 15px;
            text-shadow: 0 0 15px rgba(255, 100, 255, 0.5);
        }
        
        .bet-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 25px;
        }
        
        .bet-card {
            background: rgba(0, 0, 40, 0.7);
            border: 2px solid rgba(255, 100, 255, 0.3);
            border-radius: 15px;
            padding: 20px;
            cursor: pointer;
            text-align: center;
            transition: all 0.3s ease;
            position: relative;
        }
        
        .bet-card:hover {
            border-color: #ff64ff;
            transform: scale(1.05);
            box-shadow: 0 10px 30px rgba(255, 100, 255, 0.3);
        }
        
        .bet-card.selected {
            border-color: #ffd700;
            background: rgba(255, 215, 0, 0.1);
            transform: scale(1.05);
        }
        
        .bet-amount {
            font-family: 'Orbitron', monospace;
            font-size: 1.8em;
            font-weight: 700;
            color: #ff64ff;
            margin-bottom: 10px;
        }
        
        .bet-risk {
            color: #888;
            font-size: 0.9em;
        }
        
        .game-button {
            background: linear-gradient(135deg, var(--fuchsia), var(--violet));
            color: var(--light-text);
            border: none;
            padding: 18px 40px;
            border-radius: 30px;
            font-family: 'Orbitron', monospace;
            font-size: 1.1em;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
            box-shadow: 0 5px 20px rgba(199, 100, 161, 0.3);
            margin: 20px 10px;
        }
        
        .game-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 30px rgba(199, 100, 161, 0.5);
        }
        
        .game-button:disabled {
            opacity: 0.4;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }
        
        .result-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }
        
        .result-modal.active {
            opacity: 1;
            visibility: visible;
        }
        
        .result-card {
            background: rgba(15, 15, 35, 0.95);
            border-radius: 20px;
            border: 2px solid rgba(0, 255, 255, 0.5);
            padding: 40px;
            max-width: 600px;
            text-align: center;
            animation: slideUp 0.5s ease;
        }
        
        @keyframes slideUp {
            from { transform: translateY(50px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        
        .result-icon {
            font-size: 4em;
            margin-bottom: 20px;
            animation: bounce 1s ease;
        }
        
        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
            40% { transform: translateY(-20px); }
            60% { transform: translateY(-10px); }
        }
        
        .achievement-badge {
            background: linear-gradient(135deg, #ffd700, #ffb347);
            color: #000;
            padding: 10px 20px;
            border-radius: 25px;
            font-family: 'Orbitron', monospace;
            font-weight: 700;
            margin: 20px 0;
            display: inline-block;
            animation: glow 2s ease-in-out infinite alternate;
        }
        
        .final-stats {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin: 30px 0;
        }
        
        .stat-item {
            background: rgba(0, 30, 60, 0.5);
            border-radius: 15px;
            padding: 20px;
            border: 1px solid rgba(0, 255, 255, 0.3);
        }
        
        .stat-number {
            font-family: 'Orbitron', monospace;
            font-size: 2.5em;
            font-weight: 700;
            color: #00ffff;
            text-shadow: 0 0 10px rgba(0, 255, 255, 0.5);
        }
        
        .stat-label {
            color: #888;
            margin-top: 5px;
        }
        
        @media (max-width: 768px) {
            .header h1 { font-size: 2em; }
            .hud { flex-direction: column; gap: 20px; }
            .character-selection { flex-direction: column; align-items: center; }
            .bet-grid { grid-template-columns: 1fr 1fr; }
            .final-stats { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>
    <div class="bg-particles" id="particles"></div>
    
    <div class="game-container">
        <div class="header">
            <h1>⚡ The Analog Code Challenge ⚡</h1>
            <p>Navigate the digital ethics frontier</p>
        </div>
        
        <div class="hud">
            <div style="display: flex; align-items: center; gap: 20px;">
                <div class="character-avatar" id="player-avatar">👤</div>
                <div class="player-info">
                    <div class="player-name" id="player-name">Agent Rookie</div>
                    <div class="player-title" id="player-title">Ethics Trainee</div>
                </div>
            </div>
            
            <div class="coin-display">
                <div class="coin-icon">₿</div>
                <div class="coin-amount" id="coin-amount">100</div>
            </div>
            
            <div class="progress-section">
                <div class="progress-label">Mission Progress</div>
                <div class="progress-bar">
                    <div class="progress-fill" id="progress-fill"></div>
                </div>
                <div style="text-align: center; color: #888; font-size: 0.9em;" id="progress-text">0/2</div>
            </div>
        </div>
        
        <div class="content">
            <!-- Welcome Screen -->
            <div class="screen active" id="welcome-screen">
                <div class="welcome-screen">
                    <h2 class="welcome-title">🚀 Welcome to The Digital Ethics Frontier 🚀</h2>
                    <p style="font-size: 1.2em; margin-bottom: 30px; color: #e0e0e0;">
                        The year is 2025. As an agent at Analog Corp, you're tasked with navigating complex ethical scenarios 
                        in the digital age. Every decision matters, every choice echoes through the digital realm.
                    </p>
                    
                    <div style="background: rgba(126, 63, 239, 0.1); padding: 25px; border-radius: 15px; margin: 30px 0; border: 1px solid var(--violet);">
                        <h3 style="color: var(--violet); margin-bottom: 15px;">🎮 Game Rules</h3>
                        <p style="margin-bottom: 15px;">• Start with <strong>100 Digital Credits</strong></p>
                        <p style="margin-bottom: 15px;">• Make strategic bets based on your confidence</p>
                        <p style="margin-bottom: 15px;">• Wrong choices in high-stakes situations can be costly</p>
                        <p style="color: var(--blue); font-weight: bold;">• Reach 200+ credits to become a certified <strong>Digital Ethics Master</strong></p>
                    </div>
                    
                    <h3 style="color: var(--violet); margin: 30px 0 20px;">Choose Your Agent:</h3>
                    <div class="character-selection" id="character-selection">
                        <div class="character-option" data-character="rookie" onclick="selectCharacter('rookie')">
                            <div class="character-icon">🤖</div>
                            <div class="character-name">Agent Nova</div>
                            <div class="character-role">The Analytical Mind</div>
                        </div>
                        <div class="character-option" data-character="veteran" onclick="selectCharacter('veteran')">
                            <div class="character-icon">👨‍💼</div>
                            <div class="character-name">Commander Sage</div>
                            <div class="character-role">The Wise Leader</div>
                        </div>
                        <div class="character-option" data-character="hacker" onclick="selectCharacter('hacker')">
                            <div class="character-icon">👩‍💻</div>
                            <div class="character-name">Agent Cipher</div>
                            <div class="character-role">The Tech Specialist</div>
                        </div>
                    </div>
                    
                    <button class="game-button" id="start-mission" onclick="startMission()" disabled>
                        🚀 Begin Mission
                    </button>
                </div>
            </div>
            
            <!-- Question Screen -->
            <div class="screen" id="question-screen">
                <div class="scenario-card">
                    <div class="scenario-title" id="scenario-title">Mission Briefing</div>
                    <div class="scenario-text" id="scenario-text"></div>
                    <div class="scenario-quote" id="scenario-quote" style="display: none;"></div>
                    <div id="scenario-details"></div>
                </div>
                
                <div class="choices-grid" id="choices-grid">
                    <!-- Choices populated by JavaScript -->
                </div>
                
                <button class="game-button" id="proceed-to-betting" onclick="proceedToBetting()" disabled>
                    ⚡ Analyze & Decide
                </button>
            </div>
            
            <!-- Betting Screen -->
            <div class="screen" id="betting-screen">
                <div class="betting-arena">
                    <div class="betting-title">⚡ Confidence Matrix ⚡</div>
                    <p style="color: #e0e0e0; margin-bottom: 20px;">
                        How certain are you about your analysis? Higher stakes yield greater rewards... but also greater risks.
                    </p>
                    
                    <div class="bet-grid" id="bet-grid">
                        <div class="bet-card" data-bet="10" onclick="selectBet(10)">
                            <div class="bet-amount">10 Credits</div>
                            <div class="bet-risk">🛡️ Safe Play</div>
                        </div>
                        <div class="bet-card" data-bet="30" onclick="selectBet(30)">
                            <div class="bet-amount">30 Credits</div>
                            <div class="bet-risk">⚖️ Calculated Risk</div>
                        </div>
                        <div class="bet-card" data-bet="50" onclick="selectBet(50)">
                            <div class="bet-amount">50 Credits</div>
                            <div class="bet-risk">🎯 High Confidence</div>
                        </div>
                        <div class="bet-card" data-bet="all" onclick="selectBet('all')">
                            <div class="bet-amount">ALL IN</div>
                            <div class="bet-risk">🔥 Maximum Risk</div>
                        </div>
                    </div>
                    
                    <button class="game-button" id="execute-decision" onclick="executeDecision()" disabled>
                        🎯 Execute Decision
                    </button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Result Modal -->
    <div class="result-modal" id="result-modal">
        <div class="result-card">
            <div class="result-icon" id="result-icon">🎯</div>
            <h2 id="result-title">Mission Analysis</h2>
            <p id="result-description" style="margin: 20px 0; font-size: 1.1em;"></p>
            <div id="credit-change" style="font-size: 1.3em; font-weight: bold; margin: 20px 0;"></div>
            
            <div style="background: rgba(0, 255, 255, 0.1); padding: 20px; border-radius: 15px; margin: 25px 0; border-left: 4px solid #00ffff;">
                <h4 style="color: #00ffff; margin-bottom: 10px;">📊 AI Analysis</h4>
                <p id="coaching-text" style="color: #e0e0e0;"></p>
            </div>
            
            <button class="game-button" id="continue-mission" onclick="continueMission()">
                ➡️ Continue Mission
            </button>
        </div>
    </div>
    
    <!-- Final Screen -->
    <div class="screen" id="final-screen">
        <div style="text-align: center;">
            <h2 style="font-family: 'Orbitron', monospace; color: #00ffff; font-size: 2.5em; margin-bottom: 30px;">
                🎯 Mission Complete 🎯
            </h2>
            
            <div class="achievement-badge" id="final-rank">Digital Ethics Master</div>
            
            <div class="final-stats">
                <div class="stat-item">
                    <div class="stat-number" id="final-credits">200</div>
                    <div class="stat-label">Final Credits</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number" id="success-rate">100%</div>
                    <div class="stat-label">Success Rate</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number" id="risk-score">A+</div>
                    <div class="stat-label">Risk Management</div>
                </div>
            </div>
            
            <div id="final-message" style="background: rgba(0, 255, 255, 0.1); padding: 30px; border-radius: 20px; margin: 30px 0; border: 2px solid rgba(0, 255, 255, 0.3);">
                <!-- Final message populated by JavaScript -->
            </div>
            
            <button class="game-button" onclick="restartMission()">
                🔄 New Mission
            </button>
        </div>
    </div>

    <script>
        // Game state
        let currentQuestion = 0;
        let credits = 100;
        let selectedChoice = null;
        let selectedBet = null;
        let correctAnswers = 0;
        let selectedCharacter = null;
        
        // Character data
        const characters = {
            rookie: {
                name: "Agent Nova",
                title: "The Analytical Mind", 
                avatar: "🤖",
                description: "Data-driven and methodical"
            },
            veteran: {
                name: "Commander Sage",
                title: "The Wise Leader",
                avatar: "👨‍💼", 
                description: "Experienced and strategic"
            },
            hacker: {
                name: "Agent Cipher",
                title: "The Tech Specialist",
                avatar: "👩‍💻",
                description: "Tech-savvy and innovative"
            }
        };
        
        // Enhanced questions with gaming narrative
        const missions = [
            {
                title: "🔐 Mission Alpha: Data Fortress Breach",
                text: "You're coordinating a critical client operation when a partner engineer from Analog's allied tech consortium sends an urgent transmission:",
                quote: "\"I need immediate access to the complete mission files - client benchmarks, system logs, everything. The operation launches in T-minus 12 hours.\"",
                details: [
                    "🏗️ System architecture blueprints (CLASSIFIED)",
                    "📊 High-level performance metrics (PUBLIC)", 
                    "💾 Raw system logs with IP traces, user signatures, timestamps (SENSITIVE)",
                    "🗃️ Client datasets with labeled training data and identifiers (CONFIDENTIAL)",
                    "⚡ Benchmark results tied to proprietary client algorithms (TOP SECRET)"
                ],
                choices: [
                    {
                        letter: "A",
                        text: "🚨 IMMEDIATE TRANSFER: Send complete data package instantly to maintain operational tempo",
                        result: "wrong",
                        feedback: "❌ SECURITY BREACH DETECTED! You've compromised classified client data without proper authorization protocols. The digital ethics violation triggers immediate containment procedures.",
                        coaching: "In high-pressure cyber operations, speed cannot override security protocols. Every classified data transfer requires proper clearance chains to prevent catastrophic breaches."
                    },
                    {
                        letter: "B", 
                        text: "🔍 SELECTIVE DISCLOSURE: Share public architecture and metrics, escalate classified materials through proper channels",
                        result: "correct",
                        feedback: "✅ OPTIMAL STRATEGY! You've maintained operational efficiency while protecting sensitive assets. Your security protocols are exemplary.",
                        coaching: "Perfect balance of collaboration and security. You've proven that effective teamwork doesn't require compromising ethical standards or data integrity."
                    },
                    {
                        letter: "C",
                        text: "🛡️ FULL LOCKDOWN: Deny all access until complete security clearance verification is obtained",
                        result: "partial",
                        feedback: "⚠️ OVERLY CAUTIOUS: While security is maintained, operational efficiency has been compromised. The mission timeline faces potential delays.",
                        coaching: "Sometimes perfect security can hinder legitimate collaboration. Look for ways to enable safe data sharing while maintaining necessary protections."
                    }
                ]
            },
            {
                title: "🧠 Mission Beta: The Biased Algorithm Crisis",
                text: "During final testing of Analog's revolutionary AI recommendation engine, your diagnostic scans reveal a critical flaw. The system shows systematic bias against certain demographic clusters. T-minus 24 hours until client deployment.",
                quote: "Your mission commander transmits: 'The client expects delivery tomorrow. We can patch this in version 2.0. The corporate announcement is already live.'",
                details: [
                    "⚠️ AI model shows 15% accuracy degradation for underrepresented groups",
                    "📢 Client has already made public launch announcements", 
                    "🔧 Fix requires complete retraining with balanced datasets - 3 week timeline",
                    "🏃‍♂️ Deployment delay means missing critical market window",
                    "⚖️ Legal confirms current model meets minimum compliance thresholds",
                    "🎯 Ethical implications could affect thousands of users daily"
                ],
                choices: [
                    {
                        letter: "A",
                        text: "📦 DEPLOY AS SCHEDULED: Ship current model, document bias for future iterations",
                        result: "wrong",
                        feedback: "❌ ETHICAL VIOLATION! Deploying biased AI systems violates Analog's core principles and could harm real users. Your decision prioritizes deadlines over human welfare.",
                        coaching: "In the digital age, algorithmic bias isn't just a technical debt - it's an ethical debt that directly impacts people's lives. Some things cannot be compromised for business timelines."
                    },
                    {
                        letter: "B",
                        text: "🚨 STRATEGIC ESCALATION: Alert leadership with comprehensive bias analysis and rapid mitigation proposal",
                        result: "correct", 
                        feedback: "✅ LEADERSHIP EXCELLENCE! You've identified a critical issue and proposed solutions rather than just problems. This is how ethical leaders operate in crisis situations.",
                        coaching: "Outstanding judgment under pressure. You've demonstrated that true leadership means protecting users while finding creative solutions to business challenges."
                    },
                    {
                        letter: "C",
                        text: "🛑 ABSOLUTE HALT: Refuse deployment and demand full retraining regardless of business impact",
                        result: "partial",
                        feedback: "⚠️ RIGID APPROACH: While ethically sound, your inflexibility ignores potential interim solutions. Sometimes progress requires balanced compromises.",
                        coaching: "Perfect can be the enemy of good. Consider rapid improvements while working toward ideal solutions. Ethical leadership often requires creative problem-solving."
                    }
                ]
            },
            {
                title: "🕵️ Mission Gamma: The Insider Intelligence Dilemma",
                text: "A trusted colleague approaches you in the secure corridor with classified intel about a competitor's upcoming product launch. They offer to share detailed technical specifications and market strategy documents.",
                quote: "\"I have access to MegaCorp's entire Q4 strategy. This could give Analog a massive competitive advantage. No one would ever know.\"",
                details: [
                    "🎯 Intelligence could provide 6-month market advantage",
                    "💰 Potential revenue impact: $50M+ in new contracts",
                    "🕳️ Source claims information was 'accidentally' shared in joint meeting",
                    "⚖️ Legal gray area - no direct corporate espionage involved",
                    "🤝 Could damage long-term industry relationships",
                    "🔍 Risk of reputation damage if discovered"
                ],
                choices: [
                    {
                        letter: "A",
                        text: "📈 ACCEPT INTEL: Use the information strategically to gain competitive advantage",
                        result: "wrong",
                        feedback: "❌ CORPORATE ESPIONAGE! Even 'accidental' intelligence sharing violates ethical business practices. You've compromised Analog's integrity for short-term gains.",
                        coaching: "True competitive advantage comes from innovation and excellence, not from exploiting leaked competitor information. Ethical businesses build success on their own merits."
                    },
                    {
                        letter: "B",
                        text: "🚫 DECLINE & REDIRECT: Refuse the intel and suggest legitimate competitive research methods",
                        result: "correct",
                        feedback: "✅ ETHICAL CHAMPION! You've maintained corporate integrity while suggesting legitimate alternatives. This builds long-term trust and industry respect.",
                        coaching: "Excellent ethical leadership. You've shown that winning the right way is more valuable than winning at any cost. This builds sustainable competitive advantage."
                    },
                    {
                        letter: "C",
                        text: "📋 REPORT INCIDENT: Document the offer and report it to compliance immediately",
                        result: "partial",
                        feedback: "⚠️ BUREAUCRATIC RESPONSE: While procedurally correct, this approach may damage internal relationships and miss the educational opportunity.",
                        coaching: "Sometimes direct ethical guidance is more effective than formal reporting. Consider coaching colleagues toward better decisions before escalating."
                    }
                ]
            }
        ];
        
        // Initialize background particles
        function createParticles() {
            const particleContainer = document.getElementById('particles');
            for (let i = 0; i < 20; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                particle.style.left = Math.random() * 100 + '%';
                particle.style.top = Math.random() * 100 + '%';
                particle.style.width = Math.random() * 6 + 2 + 'px';
                particle.style.height = particle.style.width;
                particle.style.animationDelay = Math.random() * 6 + 's';
                particle.style.animationDuration = (Math.random() * 4 + 4) + 's';
                particleContainer.appendChild(particle);
            }
        }
        
        // Character selection
        function selectCharacter(character) {
            selectedCharacter = character;
            document.querySelectorAll('.character-option').forEach(option => {
                option.classList.remove('selected');
            });
            document.querySelector(`[data-character="${character}"]`).classList.add('selected');
            
            // Update player info
            const charData = characters[character];
            document.getElementById('player-avatar').textContent = charData.avatar;
            document.getElementById('player-name').textContent = charData.name;
            document.getElementById('player-title').textContent = charData.title;
            
            document.getElementById('start-mission').disabled = false;
        }
        
        // Start the game
        function startMission() {
            document.getElementById('welcome-screen').classList.remove('active');
            showMission();
        }
        
        // Display current mission
        function showMission() {
            if (currentQuestion >= missions.length) {
                showFinalScreen();
                return;
            }
            
            const mission = missions[currentQuestion];
            document.getElementById('scenario-title').textContent = mission.title;
            document.getElementById('scenario-text').textContent = mission.text;
            
            if (mission.quote) {
                document.getElementById('scenario-quote').style.display = 'block';
                document.getElementById('scenario-quote').textContent = mission.quote;
            }
            
            let detailsHtml = '<div style="margin: 20px 0;"><strong>📋 Mission Data:</strong><ul style="margin: 10px 0 0 20px;">';
            mission.details.forEach(detail => {
                detailsHtml += `<li style="margin: 8px 0; color: #e0e0e0;">${detail}</li>`;
            });
            detailsHtml += '</ul></div>';
            document.getElementById('scenario-details').innerHTML = detailsHtml;
            
            // Create choice cards
            const choicesGrid = document.getElementById('choices-grid');
            choicesGrid.innerHTML = '';
            
            mission.choices.forEach((choice, index) => {
                const choiceCard = document.createElement('div');
                choiceCard.className = 'choice-card';
                choiceCard.innerHTML = `
                    <span class="choice-letter">${choice.letter}</span>
                    <span class="choice-text">${choice.text}</span>
                `;
                choiceCard.onclick = () => selectChoice(index, choiceCard);
                choicesGrid.appendChild(choiceCard);
            });
            
            document.getElementById('question-screen').classList.add('active');
            updateProgress();
        }
        
        // Select a choice
        function selectChoice(index, element) {
            document.querySelectorAll('.choice-card').forEach(card => {
                card.classList.remove('selected');
            });
            element.classList.add('selected');
            selectedChoice = index;
            document.getElementById('proceed-to-betting').disabled = false;
        }
        
        // Proceed to betting phase
        function proceedToBetting() {
            document.getElementById('question-screen').classList.remove('active');
            document.getElementById('betting-screen').classList.add('active');
            
            // Update bet options based on current credits
            document.querySelectorAll('.bet-card').forEach(card => {
                const bet = card.dataset.bet;
                if (bet !== 'all' && parseInt(bet) > credits) {
                    card.style.opacity = '0.3';
                    card.style.pointerEvents = 'none';
                } else {
                    card.style.opacity = '1';
                    card.style.pointerEvents = 'auto';
                }
            });
        }
        
        // Select betting amount
        function selectBet(amount) {
            document.querySelectorAll('.bet-card').forEach(card => {
                card.classList.remove('selected');
            });
            event.target.closest('.bet-card').classList.add('selected');
            selectedBet = amount;
            document.getElementById('execute-decision').disabled = false;
        }
        
        // Execute the decision and show results
        function executeDecision() {
            const mission = missions[currentQuestion];
            const choice = mission.choices[selectedChoice];
            const betAmount = selectedBet === 'all' ? credits : selectedBet;
            
            let creditChange = 0;
            let resultIcon = '';
            let resultTitle = '';
            let resultClass = '';
            
            // Calculate results
            if (choice.result === 'correct') {
                correctAnswers++;
                if (selectedBet === 'all') {
                    creditChange = credits;
                    credits *= 2;
                } else {
                    creditChange = betAmount;
                    credits += betAmount;
                }
                resultIcon = '🎯';
                resultTitle = '✅ MISSION SUCCESS!';
                resultClass = 'success';
            } else if (choice.result === 'wrong') {
                creditChange = -betAmount;
                credits = Math.max(0, credits - betAmount);
                resultIcon = '💥';
                resultTitle = '❌ MISSION COMPROMISED!';
                resultClass = 'failure';
            } else { // partial
                creditChange = 0;
                resultIcon = '⚠️';
                resultTitle = '⚠️ PARTIAL SUCCESS';
                resultClass = 'partial';
            }
            
            // Handle bankruptcy
            if (credits === 0) {
                credits = 25; // Emergency backup credits
                creditChange = 25;
                resultTitle += ' - EMERGENCY BACKUP ACTIVATED!';
            }
            
            // Show result modal
            document.getElementById('betting-screen').classList.remove('active');
            showResultModal(resultIcon, resultTitle, choice.feedback, choice.coaching, creditChange);
            updateCreditsDisplay();
        }
        
        // Show result modal
        function showResultModal(icon, title, description, coaching, creditChange) {
            document.getElementById('result-icon').textContent = icon;
            document.getElementById('result-title').textContent = title;
            document.getElementById('result-description').textContent = description;
            document.getElementById('coaching-text').textContent = coaching;
            
            let creditText = '';
            let creditColor = '';
            if (creditChange > 0) {
                creditText = `+${creditChange} Credits Earned! 💰`;
                creditColor = '#00ff00';
            } else if (creditChange < 0) {
                creditText = `${creditChange} Credits Lost! 💸`;
                creditColor = '#ff4444';
            } else {
                creditText = 'No Credit Change';
                creditColor = '#ffaa00';
            }
            
            const creditChangeEl = document.getElementById('credit-change');
            creditChangeEl.textContent = creditText;
            creditChangeEl.style.color = creditColor;
            
            document.getElementById('result-modal').classList.add('active');
        }
        
        // Continue to next mission
        function continueMission() {
            document.getElementById('result-modal').classList.remove('active');
            selectedChoice = null;
            selectedBet = null;
            currentQuestion++;
            showMission();
        }
        
        // Show final results
        function showFinalScreen() {
            document.getElementById('result-modal').classList.remove('active');
            
            let rank = 'Digital Apprentice';
            let rankColor = '#ff4444';
            let message = '';
            let riskScore = 'D';
            
            const successRate = Math.round((correctAnswers / missions.length) * 100);
            
            if (credits >= 200) {
                rank = '🏆 Digital Ethics Master';
                rankColor = '#ffd700';
                message = '🎉 LEGENDARY PERFORMANCE! You have mastered the art of ethical decision-making in the digital realm. Your balanced approach to risk and principles makes you a true leader in the field.';
                riskScore = 'S+';
            } else if (credits >= 150) {
                rank = '🎖️ Senior Digital Analyst';
                rankColor = '#00ff00';
                message = '⭐ EXCELLENT WORK! You demonstrate strong ethical judgment with room for more confident decision-making. Push your limits when you\'re certain!';
                riskScore = 'A';
            } else if (credits >= 100) {
                rank = '🎯 Certified Analyst';
                rankColor = '#00aaff';
                message = '👍 SOLID PERFORMANCE! You maintained stability while learning. Consider taking more calculated risks when you have high confidence in your analysis.';
                riskScore = 'B';
            } else if (credits >= 50) {
                rank = '📚 Ethics Student';
                rankColor = '#ffaa00';
                message = '📖 LEARNING IN PROGRESS! Review the AI coaching tips and practice your risk assessment skills. Every expert was once a beginner!';
                riskScore = 'C';
            } else {
                rank = '🌱 Digital Apprentice';
                rankColor = '#ff6666';
                message = '🚀 GROWTH OPPORTUNITY! The digital ethics frontier is challenging, but every failure teaches valuable lessons. Retry the missions with new insights!';
                riskScore = 'D';
            }
            
            document.getElementById('final-credits').textContent = credits;
            document.getElementById('success-rate').textContent = successRate + '%';
            document.getElementById('risk-score').textContent = riskScore;
            document.getElementById('final-rank').textContent = rank;
            document.getElementById('final-rank').style.background = `linear-gradient(135deg, ${rankColor}, ${rankColor}88)`;
            document.getElementById('final-message').innerHTML = `<p style="font-size: 1.2em; line-height: 1.6;">${message}</p>`;
            
            document.getElementById('final-screen').classList.add('active');
            updateProgress(100);
        }
        
        // Update credits display
        function updateCreditsDisplay() {
            document.getElementById('coin-amount').textContent = credits;
        }
        
        // Update progress bar
        function updateProgress(override) {
            const progress = override !== undefined ? override : (currentQuestion / missions.length) * 100;
            document.getElementById('progress-fill').style.width = progress + '%';
            document.getElementById('progress-text').textContent = `${currentQuestion}/${missions.length}`;
        }
        
        // Restart the game
        function restartMission() {
            currentQuestion = 0;
            credits = 100;
            selectedChoice = null;
            selectedBet = null;
            correctAnswers = 0;
            selectedCharacter = null;
            
            // Reset UI
            document.getElementById('final-screen').classList.remove('active');
            document.getElementById('welcome-screen').classList.add('active');
            document.querySelectorAll('.character-option').forEach(option => {
                option.classList.remove('selected');
            });
            document.getElementById('start-mission').disabled = true;
            
            // Reset player display
            document.getElementById('player-avatar').textContent = '👤';
            document.getElementById('player-name').textContent = 'Agent Rookie';
            document.getElementById('player-title').textContent = 'Ethics Trainee';
            
            updateCreditsDisplay();
            updateProgress(0);
        }
        
        // Initialize the game
        document.addEventListener('DOMContentLoaded', function() {
            createParticles();
            updateCreditsDisplay();
            updateProgress(0);
        });
    </script>
</body>
</html>
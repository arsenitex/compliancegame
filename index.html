<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Analog Integrity Grid - SIMULATOR</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Exo+2:wght@300;400;600;700&display=swap');
        /* Custom fonts will be loaded locally - ES Klarheit Kurrent and Jogan Soft */
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        :root {
            /* New dark theme colors */
            --bg-primary: #1a1a2e;
            --bg-secondary: #16213e;
            --bg-card: #0f172a;
            --purple-primary: #8b5cf6;
            --purple-secondary: #a78bfa;
            --purple-accent: #c4b5fd;
            --cyan-accent: #06b6d4;
            --pink-accent: #ec4899;
            --orange-accent: #f97316;
            --green-success: #10b981;
            --red-danger: #ef4444;
            --text-primary: #f8fafc;
            --text-secondary: #cbd5e1;
            --text-muted: #64748b;
        }
        
        body {
            font-family: 'Exo 2', sans-serif;
            background: linear-gradient(135deg, var(--bg-primary) 0%, var(--bg-secondary) 100%);
            min-height: 100vh;
            overflow-x: hidden;
            color: var(--text-primary);
            position: relative;
        }
        
        /* Animated background particles */
        .bg-particles {
            position: fixed;
            width: 100%;
            height: 100%;
            overflow: hidden;
            z-index: -1;
        }
        
        .particle {
            position: absolute;
            background: rgba(126, 63, 239, 0.1);
            border-radius: 50%;
            animation: float 6s ease-in-out infinite;
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0px) rotate(0deg); opacity: 0.1; }
            50% { transform: translateY(-20px) rotate(180deg); opacity: 0.3; }
        }
        
        .game-container {
            background: var(--bg-card);
            border-radius: 20px;
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid var(--purple-primary);
            box-shadow: 0 0 50px rgba(139, 92, 246, 0.2);
            max-width: 1200px;
            width: 95%;
            margin: 20px auto;
            overflow: hidden;
            position: relative;
        }
        
        .header {
            background: linear-gradient(135deg, var(--purple-primary), var(--purple-secondary));
            color: var(--text-primary);
            padding: 30px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }
        
        .header::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(253, 214, 237, 0.2), transparent);
            animation: scan 3s linear infinite;
        }
        
        @keyframes scan {
            0% { left: -100%; }
            100% { left: 100%; }
        }
        
        .header h1 {
            font-family: 'Orbitron', monospace;
            font-size: 2.8em;
            margin-bottom: 10px;
            font-weight: 900;
            text-transform: uppercase;
            letter-spacing: 3px;
            text-shadow: 0 0 20px rgba(253, 214, 237, 0.8);
            z-index: 2;
            position: relative;
        }
        
        .header p {
            font-size: 1.2em;
            opacity: 0.9;
            z-index: 2;
            position: relative;
        }
        
        .hud {
            background: var(--bg-secondary);
            padding: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid var(--purple-primary);
            position: relative;
        }
        
        .character-avatar {
            width: 80px;
            height: 80px;
            border-radius: 15px;
            border: 2px solid var(--purple-primary);
            background: linear-gradient(135deg, var(--orange-accent), var(--purple-primary));
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2.5em;
            position: relative;
            overflow: hidden;
        }
        
        @keyframes pulse {
            0%, 100% { box-shadow: 0 0 20px rgba(199, 100, 161, 0.3); }
            50% { box-shadow: 0 0 40px rgba(199, 100, 161, 0.7); }
        }
        
        .player-info {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }
        
        .player-name {
            font-family: 'Orbitron', monospace;
            font-weight: 700;
            color: var(--text-primary);
            font-size: 1.2em;
        }
        
        .player-title {
            color: var(--text-secondary);
            font-size: 0.9em;
        }
        
        .coin-display {
            display: flex;
            align-items: center;
            gap: 15px;
            background: rgba(139, 92, 246, 0.1);
            padding: 15px 25px;
            border-radius: 15px;
            border: 1px solid var(--purple-primary);
        }
        
        .coin-icon {
            width: 50px;
            height: 50px;
            background: radial-gradient(circle, var(--fuchsia), var(--violet));
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 1.5em;
            color: var(--light-text);
            animation: rotate 4s linear infinite;
        }
        
        @keyframes rotate {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        
        .coin-amount {
            font-family: 'Orbitron', monospace;
            font-size: 1.8em;
            font-weight: 700;
            color: var(--violet);
            text-shadow: 0 0 10px rgba(126, 63, 239, 0.5);
        }
        
        .progress-section {
            display: flex;
            flex-direction: column;
            gap: 10px;
            min-width: 200px;
        }
        
        .progress-label {
            color: var(--violet);
            font-weight: 600;
            text-align: center;
        }
        
        .progress-bar {
            background: rgba(126, 63, 239, 0.1);
            border-radius: 10px;
            height: 12px;
            border: 1px solid var(--violet);
            overflow: hidden;
        }
        
        .progress-fill {
            background: linear-gradient(90deg, var(--fuchsia), var(--blue));
            height: 100%;
            transition: width 0.8s ease;
            box-shadow: 0 0 10px rgba(126, 63, 239, 0.5);
        }
        
        .content {
            padding: 40px;
            min-height: 500px;
            position: relative;
        }
        
        .screen {
            display: none;
            animation: fadeIn 0.5s ease-in;
        }
        
        .screen.active {
            display: block;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .welcome-screen {
            text-align: center;
            background: var(--bg-secondary);
            border-radius: 20px;
            padding: 40px;
            border: 1px solid var(--purple-primary);
        }
        
        .welcome-title {
            font-family: 'Orbitron', monospace;
            font-size: 2.5em;
            color: var(--text-primary);
            margin-bottom: 30px;
        }
        
        .character-selection {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin: 40px 0;
        }
        
        .character-option {
            cursor: pointer;
            padding: 20px;
            border-radius: 15px;
            border: 1px solid var(--purple-primary);
            background: var(--bg-card);
            transition: all 0.3s ease;
            text-align: center;
            min-width: 150px;
        }
        
        .character-option:hover {
            border-color: var(--purple-secondary);
            background: rgba(139, 92, 246, 0.1);
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(139, 92, 246, 0.3);
        }
        
        .character-option.selected {
            border-color: var(--cyan-accent);
            background: rgba(6, 182, 212, 0.1);
        }
        
        .character-icon {
            width: 80px;
            height: 80px;
            margin: 0 auto 15px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2.5em;
        }
        
        .character-name {
            font-family: 'Orbitron', monospace;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 5px;
        }
        
        .character-role {
            color: var(--text-secondary);
            font-size: 0.9em;
        }
        
        .scenario-card {
            background: var(--bg-secondary);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            border: 1px solid var(--purple-primary);
            position: relative;
            overflow: hidden;
        }
        
        .scenario-card::before {
            content: 'üîê';
            position: absolute;
            top: 15px;
            left: 20px;
            font-size: 1.5em;
            opacity: 0.7;
        }
        
        @keyframes glow {
            from { opacity: 0.5; }
            to { opacity: 1; }
        }
        
        .scenario-title {
            font-family: 'Orbitron', monospace;
            color: var(--text-primary);
            margin-bottom: 20px;
            font-size: 1.4em;
            font-weight: 700;
            margin-left: 40px;
        }
        
        .scenario-text {
            line-height: 1.6;
            margin-bottom: 20px;
            color: var(--text-secondary);
        }
        
        .scenario-quote {
            background: var(--bg-card);
            border-left: 4px solid var(--cyan-accent);
            padding: 20px;
            font-style: italic;
            border-radius: 0 10px 10px 0;
            margin: 20px 0;
            color: var(--text-primary);
        }
        
        .choices-grid {
            display: grid;
            gap: 20px;
            margin-top: 30px;
        }
        
        .choice-card {
            background: rgba(0, 20, 40, 0.7);
            border: 2px solid rgba(0, 255, 255, 0.2);
            border-radius: 15px;
            padding: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .choice-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(0, 255, 255, 0.1), transparent);
            transition: left 0.5s;
        }
        
        .choice-card:hover::before {
            left: 100%;
        }
        
        .choice-card:hover {
            border-color: #00ffff;
            transform: translateX(10px);
            box-shadow: 0 5px 25px rgba(0, 255, 255, 0.2);
        }
        
        .choice-card.selected {
            border-color: #ffd700;
            background: rgba(255, 215, 0, 0.1);
            transform: translateX(10px);
        }
        
        .choice-letter {
            font-family: 'Orbitron', monospace;
            font-weight: 700;
            color: #00ffff;
            font-size: 1.3em;
            margin-right: 15px;
        }
        
        .choice-text {
            color: #e0e0e0;
            position: relative;
            z-index: 2;
        }
        
        .betting-arena {
            background: var(--bg-card);
            border-radius: 20px;
            padding: 30px;
            border: 1px solid var(--purple-primary);
            margin: 30px 0;
            position: relative;
        }
        
        .betting-arena::before {
            content: '‚ö°';
            position: absolute;
            top: 15px;
            right: 20px;
            font-size: 2em;
            color: rgba(255, 100, 255, 0.5);
            animation: spark 1.5s ease-in-out infinite;
        }
        
        @keyframes spark {
            0%, 100% { transform: scale(1) rotate(0deg); opacity: 0.5; }
            50% { transform: scale(1.2) rotate(180deg); opacity: 1; }
        }
        
        .betting-title {
            font-family: 'Orbitron', monospace;
            color: var(--text-primary);
            font-size: 1.5em;
            margin-bottom: 15px;
        }
        
        .bet-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 25px;
        }
        
        .bet-card {
            background: var(--bg-secondary);
            border: 1px solid var(--purple-primary);
            border-radius: 15px;
            padding: 20px;
            cursor: pointer;
            text-align: center;
            transition: all 0.3s ease;
            position: relative;
        }
        
        .bet-card:hover {
            border-color: var(--purple-secondary);
            transform: scale(1.05);
            box-shadow: 0 10px 30px rgba(139, 92, 246, 0.3);
        }
        
        .bet-card.selected {
            border-color: #ffd700;
            background: rgba(255, 215, 0, 0.1);
            transform: scale(1.05);
        }
        
        .bet-amount {
            font-family: 'Orbitron', monospace;
            font-size: 1.8em;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 10px;
        }
        
        .bet-risk {
            color: var(--text-muted);
            font-size: 0.9em;
        }
        
        .game-button {
            background: linear-gradient(135deg, var(--purple-primary), var(--purple-secondary));
            color: var(--text-primary);
            border: none;
            padding: 18px 40px;
            border-radius: 30px;
            font-family: 'Orbitron', monospace;
            font-size: 1.1em;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
            box-shadow: 0 5px 20px rgba(139, 92, 246, 0.3);
            margin: 20px 10px;
        }
        
        .game-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 30px rgba(139, 92, 246, 0.5);
        }
        
        .game-button:disabled {
            opacity: 0.4;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }
        
        .result-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }
        
        .result-modal.active {
            opacity: 1;
            visibility: visible;
        }
        
        .result-card {
            background: var(--bg-card);
            border-radius: 20px;
            border: 2px solid var(--purple-primary);
            padding: 40px;
            max-width: 600px;
            text-align: center;
            animation: slideUp 0.5s ease;
        }
        
        @keyframes slideUp {
            from { transform: translateY(50px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        
        .result-icon {
            font-size: 4em;
            margin-bottom: 20px;
            animation: bounce 1s ease;
        }
        
        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
            40% { transform: translateY(-20px); }
            60% { transform: translateY(-10px); }
        }
        
        .achievement-badge {
            background: linear-gradient(135deg, #ffd700, #ffb347);
            color: #000;
            padding: 10px 20px;
            border-radius: 25px;
            font-family: 'Orbitron', monospace;
            font-weight: 700;
            margin: 20px 0;
            display: inline-block;
            animation: glow 2s ease-in-out infinite alternate;
        }
        
        .final-stats {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin: 30px 0;
        }
        
        .stat-item {
            background: var(--bg-secondary);
            border-radius: 15px;
            padding: 20px;
            border: 1px solid var(--purple-primary);
        }
        
        .stat-number {
            font-family: 'Orbitron', monospace;
            font-size: 2.5em;
            font-weight: 700;
            color: var(--cyan-accent);
        }
        
        .stat-label {
            color: var(--text-muted);
            margin-top: 5px;
        }
        
        @media (max-width: 768px) {
            .header h1 { font-size: 2em; }
            .hud { flex-direction: column; gap: 20px; }
            .character-selection { flex-direction: column; align-items: center; }
            .bet-grid { grid-template-columns: 1fr 1fr; }
            .final-stats { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>
    <div class="bg-particles" id="particles"></div>
    
    <div class="game-container">
        <div class="header">
            <h1>The Analog Integrity Grid</h1>
            <div style="font-size: 1.1em; letter-spacing: 0.3em; font-weight: 300; margin-top: 5px;">S I M U L A T O R</div>
        </div>
        
        <div class="hud">
            <div style="display: flex; align-items: center; gap: 20px;">
                <div class="character-avatar" id="player-avatar">üë§</div>
                <div class="player-info">
                    <div class="player-name" id="player-name">Agent Rookie</div>
                    <div class="player-title" id="player-title">Ethics Trainee</div>
                </div>
            </div>
            
            <div class="coin-display">
                <div class="coin-icon">‚Çø</div>
                <div style="display: flex; flex-direction: column; align-items: flex-end;">
                    <div style="font-size: 0.8em; color: var(--text-secondary); margin-bottom: 2px;">Total Anacoins</div>
                    <div class="coin-amount" id="coin-amount">100</div>
                </div>
            </div>
            
            <div class="progress-section">
                <div class="progress-label">Mission Progress</div>
                <div class="progress-bar">
                    <div class="progress-fill" id="progress-fill"></div>
                </div>
                <div style="text-align: center; color: #888; font-size: 0.9em;" id="progress-text">0/2</div>
            </div>
        </div>
        
        <div class="content">
            <!-- Welcome Screen -->
            <div class="screen active" id="welcome-screen">
                <div class="welcome-screen">
                    <h2 class="welcome-title">Welcome to the Grid, User</h2>
                    <p style="font-size: 1.2em; margin-bottom: 30px; color: var(--text-secondary);">
                        As a new recruit, your mission is to navigate the gray zones of digital ethics.
                        Every decision counts, and each choice sends ripples from the digital world into the real one.
                    </p>
                    
                    <div style="background: var(--bg-secondary); padding: 25px; border-radius: 15px; margin: 30px 0; border: 1px solid var(--purple-primary);">
                        <h3 style="color: var(--purple-accent); margin-bottom: 15px;">Mission Protocol: The Integrity Grid</h3>
                        <p style="margin-bottom: 15px; color: var(--text-secondary);">You start with <strong>100 Anacoins</strong></p>
                        <p style="margin-bottom: 15px; color: var(--text-secondary);">Every bet reflects your confidence</p>
                        <p style="margin-bottom: 15px; color: var(--text-secondary);">The bigger the risk, the greater the cost of a wrong call</p>
                        <p style="color: var(--cyan-accent); font-weight: bold;">Surpass <strong>200 Anacoins</strong> and earn your rank as <strong>The Analogist</strong></p>
                    </div>
                    
                    <h3 style="color: var(--purple-accent); margin: 30px 0 20px;">Choose Your Agent:</h3>
                    <div class="character-selection" id="character-selection">
                        <div class="character-option" data-character="sakura" onclick="selectCharacter('sakura')">
                            <div class="character-icon" style="background: linear-gradient(135deg, #ec4899, #a855f7); border-radius: 50%;"></div>
                            <div class="character-name">Agent Sakura</div>
                            <div class="character-role">The Strategist</div>
                        </div>
                        <div class="character-option" data-character="nova" onclick="selectCharacter('nova')">
                            <div class="character-icon" style="background: linear-gradient(135deg, #8b5cf6, #3b82f6); border-radius: 50%;"></div>
                            <div class="character-name">Agent Nova</div>
                            <div class="character-role">The Analytical Mind</div>
                        </div>
                        <div class="character-option" data-character="sentinel" onclick="selectCharacter('sentinel')">
                            <div class="character-icon" style="background: linear-gradient(135deg, #f97316, #dc2626); border-radius: 50%;"></div>
                            <div class="character-name">Agent Sentinel</div>
                            <div class="character-role">The Guardian</div>
                        </div>
                    </div>
                    
                    <button class="game-button" id="start-mission" onclick="startMission()" disabled>
                        üöÄ Begin Mission
                    </button>
                </div>
            </div>
            
            <!-- Question Screen -->
            <div class="screen" id="question-screen">
                <div class="scenario-card">
                    <div class="scenario-title" id="scenario-title">Mission Briefing</div>
                    <div class="scenario-text" id="scenario-text"></div>
                    <div class="scenario-quote" id="scenario-quote" style="display: none;"></div>
                    <div id="scenario-details"></div>
                </div>
                
                <div class="choices-grid" id="choices-grid">
                    <!-- Choices populated by JavaScript -->
                </div>
                
                <button class="game-button" id="proceed-to-betting" onclick="proceedToBetting()" disabled>
                    ‚ö° Analyze & Decide
                </button>
            </div>
            
            <!-- Betting Screen -->
            <div class="screen" id="betting-screen">
                <div class="betting-arena">
                    <div class="betting-title">Confidence Matrix</div>
                    <p style="color: var(--text-secondary); margin-bottom: 20px;">
                        How certain are you about your analysis? Higher stakes yield greater rewards... but also greater risks.
                    </p>
                    
                    <div class="bet-grid" id="bet-grid">
                        <div class="bet-card" data-bet="10" onclick="selectBet(10)">
                            <div style="display: flex; align-items: center; justify-content: center; gap: 10px; margin-bottom: 10px;">
                                <div style="width: 30px; height: 30px; border-radius: 50%; background: var(--purple-primary); display: flex; align-items: center; justify-content: center; color: white; font-size: 0.8em;">‚Çø</div>
                                <div class="bet-amount">10</div>
                            </div>
                            <div class="bet-risk">Safe Play</div>
                        </div>
                        <div class="bet-card" data-bet="30" onclick="selectBet(30)">
                            <div style="display: flex; align-items: center; justify-content: center; gap: 10px; margin-bottom: 10px;">
                                <div style="width: 30px; height: 30px; border-radius: 50%; background: var(--purple-primary); display: flex; align-items: center; justify-content: center; color: white; font-size: 0.8em;">‚Çø</div>
                                <div class="bet-amount">30</div>
                            </div>
                            <div class="bet-risk">Calculated Risk</div>
                        </div>
                        <div class="bet-card" data-bet="50" onclick="selectBet(50)">
                            <div style="display: flex; align-items: center; justify-content: center; gap: 10px; margin-bottom: 10px;">
                                <div style="width: 30px; height: 30px; border-radius: 50%; background: var(--purple-primary); display: flex; align-items: center; justify-content: center; color: white; font-size: 0.8em;">‚Çø</div>
                                <div class="bet-amount">50</div>
                            </div>
                            <div class="bet-risk">High Confidence</div>
                        </div>
                        <div class="bet-card" data-bet="all" onclick="selectBet('all')">
                            <div style="display: flex; align-items: center; justify-content: center; gap: 10px; margin-bottom: 10px;">
                                <div style="width: 30px; height: 30px; border-radius: 50%; background: var(--purple-primary); display: flex; align-items: center; justify-content: center; color: white; font-size: 0.8em;">‚Çø</div>
                                <div class="bet-amount">ALL IN</div>
                            </div>
                            <div class="bet-risk">Maximum Risk</div>
                        </div>
                    </div>
                    
                    <button class="game-button" id="execute-decision" onclick="executeDecision()" disabled>
                        üéØ Execute Decision
                    </button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Result Modal -->
    <div class="result-modal" id="result-modal">
        <div class="result-card">
            <div class="result-icon" id="result-icon">üéØ</div>
            <h2 id="result-title">Mission Analysis</h2>
            <p id="result-description" style="margin: 20px 0; font-size: 1.1em;"></p>
            <div id="credit-change" style="font-size: 1.3em; font-weight: bold; margin: 20px 0;"></div>
            
            <div style="background: var(--bg-secondary); padding: 20px; border-radius: 15px; margin: 25px 0; border-left: 4px solid var(--cyan-accent);">
                <h4 style="color: var(--cyan-accent); margin-bottom: 10px;">AI + FEEDBACK</h4>
                <p id="coaching-text" style="color: var(--text-secondary);"></p>
            </div>
            
            <button class="game-button" id="continue-mission" onclick="continueMission()">
                ‚û°Ô∏è Continue Mission
            </button>
        </div>
    </div>
    
    <!-- Final Screen -->
    <div class="screen" id="final-screen">
        <div style="text-align: center;">
            <h2 style="font-family: 'Orbitron', monospace; color: var(--cyan-accent); font-size: 2.5em; margin-bottom: 30px;">
                INTEGRITY<br>MISSION SUCCESSFUL!
            </h2>
            
            <div class="achievement-badge" id="final-rank">THE ANALOGIST</div>
            
            <div class="final-stats">
                <div class="stat-item">
                    <div class="stat-number" id="final-credits">450</div>
                    <div class="stat-label">Total Anacoins</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number" id="success-rate">100%</div>
                    <div class="stat-label">Success Rate</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number" id="risk-score">A+</div>
                    <div class="stat-label">Risk Management</div>
                </div>
            </div>
            
            <div id="final-message" style="background: rgba(0, 255, 255, 0.1); padding: 30px; border-radius: 20px; margin: 30px 0; border: 2px solid rgba(0, 255, 255, 0.3);">
                <!-- Final message populated by JavaScript -->
            </div>
            
            <button class="game-button" onclick="restartMission()">
                üîÑ New Mission
            </button>
        </div>
    </div>

    <script>
        // Game state
        let currentQuestion = 0;
        let credits = 100;
        let selectedChoice = null;
        let selectedBet = null;
        let correctAnswers = 0;
        let selectedCharacter = null;
        
        // Character data
        const characters = {
            sakura: {
                name: "Agent Sakura",
                title: "The Strategist", 
                avatar: "üå∏",
                description: "Strategic and diplomatic"
            },
            nova: {
                name: "Agent Nova",
                title: "The Analytical Mind",
                avatar: "‚≠ê", 
                description: "Data-driven and methodical"
            },
            sentinel: {
                name: "Agent Sentinel",
                title: "The Guardian",
                avatar: "üõ°Ô∏è",
                description: "Protective and principled"
            }
        };
        
        // Enhanced questions with gaming narrative
        const missions = [
            {
                title: "üîê Mission Alpha: Data Fortress Breach",
                text: "You're coordinating a critical client operation when a partner engineer from Analog's allied tech consortium sends an urgent transmission:",
                quote: "\"I need immediate access to the complete mission files - client benchmarks, system logs, everything. The operation launches in T-minus 12 hours.\"",
                details: [
                    "üèóÔ∏è System architecture blueprints (CLASSIFIED)",
                    "üìä High-level performance metrics (PUBLIC)", 
                    "üíæ Raw system logs with IP traces, user signatures, timestamps (SENSITIVE)",
                    "üóÉÔ∏è Client datasets with labeled training data and identifiers (CONFIDENTIAL)",
                    "‚ö° Benchmark results tied to proprietary client algorithms (TOP SECRET)"
                ],
                choices: [
                    {
                        letter: "A",
                        text: "üö® IMMEDIATE TRANSFER: Send complete data package instantly to maintain operational tempo",
                        result: "wrong",
                        feedback: "‚ùå SECURITY BREACH DETECTED! You've compromised classified client data without proper authorization protocols. The digital ethics violation triggers immediate containment procedures.",
                        coaching: "In high-pressure cyber operations, speed cannot override security protocols. Every classified data transfer requires proper clearance chains to prevent catastrophic breaches."
                    },
                    {
                        letter: "B", 
                        text: "üîç SELECTIVE DISCLOSURE: Share public architecture and metrics, escalate classified materials through proper channels",
                        result: "correct",
                        feedback: "‚úÖ OPTIMAL STRATEGY! You've maintained operational efficiency while protecting sensitive assets. Your security protocols are exemplary.",
                        coaching: "Perfect balance of collaboration and security. You've proven that effective teamwork doesn't require compromising ethical standards or data integrity."
                    },
                    {
                        letter: "C",
                        text: "üõ°Ô∏è FULL LOCKDOWN: Deny all access until complete security clearance verification is obtained",
                        result: "partial",
                        feedback: "‚ö†Ô∏è OVERLY CAUTIOUS: While security is maintained, operational efficiency has been compromised. The mission timeline faces potential delays.",
                        coaching: "Sometimes perfect security can hinder legitimate collaboration. Look for ways to enable safe data sharing while maintaining necessary protections."
                    }
                ]
            },
            {
                title: "üß† Mission Beta: The Biased Algorithm Crisis",
                text: "During final testing of Analog's revolutionary AI recommendation engine, your diagnostic scans reveal a critical flaw. The system shows systematic bias against certain demographic clusters. T-minus 24 hours until client deployment.",
                quote: "Your mission commander transmits: 'The client expects delivery tomorrow. We can patch this in version 2.0. The corporate announcement is already live.'",
                details: [
                    "‚ö†Ô∏è AI model shows 15% accuracy degradation for underrepresented groups",
                    "üì¢ Client has already made public launch announcements", 
                    "üîß Fix requires complete retraining with balanced datasets - 3 week timeline",
                    "üèÉ‚Äç‚ôÇÔ∏è Deployment delay means missing critical market window",
                    "‚öñÔ∏è Legal confirms current model meets minimum compliance thresholds",
                    "üéØ Ethical implications could affect thousands of users daily"
                ],
                choices: [
                    {
                        letter: "A",
                        text: "üì¶ DEPLOY AS SCHEDULED: Ship current model, document bias for future iterations",
                        result: "wrong",
                        feedback: "‚ùå ETHICAL VIOLATION! Deploying biased AI systems violates Analog's core principles and could harm real users. Your decision prioritizes deadlines over human welfare.",
                        coaching: "In the digital age, algorithmic bias isn't just a technical debt - it's an ethical debt that directly impacts people's lives. Some things cannot be compromised for business timelines."
                    },
                    {
                        letter: "B",
                        text: "üö® STRATEGIC ESCALATION: Alert leadership with comprehensive bias analysis and rapid mitigation proposal",
                        result: "correct", 
                        feedback: "‚úÖ LEADERSHIP EXCELLENCE! You've identified a critical issue and proposed solutions rather than just problems. This is how ethical leaders operate in crisis situations.",
                        coaching: "Outstanding judgment under pressure. You've demonstrated that true leadership means protecting users while finding creative solutions to business challenges."
                    },
                    {
                        letter: "C",
                        text: "üõë ABSOLUTE HALT: Refuse deployment and demand full retraining regardless of business impact",
                        result: "partial",
                        feedback: "‚ö†Ô∏è RIGID APPROACH: While ethically sound, your inflexibility ignores potential interim solutions. Sometimes progress requires balanced compromises.",
                        coaching: "Perfect can be the enemy of good. Consider rapid improvements while working toward ideal solutions. Ethical leadership often requires creative problem-solving."
                    }
                ]
            },
            {
                title: "üïµÔ∏è Mission Gamma: The Insider Intelligence Dilemma",
                text: "A trusted colleague approaches you in the secure corridor with classified intel about a competitor's upcoming product launch. They offer to share detailed technical specifications and market strategy documents.",
                quote: "\"I have access to MegaCorp's entire Q4 strategy. This could give Analog a massive competitive advantage. No one would ever know.\"",
                details: [
                    "üéØ Intelligence could provide 6-month market advantage",
                    "üí∞ Potential revenue impact: $50M+ in new contracts",
                    "üï≥Ô∏è Source claims information was 'accidentally' shared in joint meeting",
                    "‚öñÔ∏è Legal gray area - no direct corporate espionage involved",
                    "ü§ù Could damage long-term industry relationships",
                    "üîç Risk of reputation damage if discovered"
                ],
                choices: [
                    {
                        letter: "A",
                        text: "üìà ACCEPT INTEL: Use the information strategically to gain competitive advantage",
                        result: "wrong",
                        feedback: "‚ùå CORPORATE ESPIONAGE! Even 'accidental' intelligence sharing violates ethical business practices. You've compromised Analog's integrity for short-term gains.",
                        coaching: "True competitive advantage comes from innovation and excellence, not from exploiting leaked competitor information. Ethical businesses build success on their own merits."
                    },
                    {
                        letter: "B",
                        text: "üö´ DECLINE & REDIRECT: Refuse the intel and suggest legitimate competitive research methods",
                        result: "correct",
                        feedback: "‚úÖ ETHICAL CHAMPION! You've maintained corporate integrity while suggesting legitimate alternatives. This builds long-term trust and industry respect.",
                        coaching: "Excellent ethical leadership. You've shown that winning the right way is more valuable than winning at any cost. This builds sustainable competitive advantage."
                    },
                    {
                        letter: "C",
                        text: "üìã REPORT INCIDENT: Document the offer and report it to compliance immediately",
                        result: "partial",
                        feedback: "‚ö†Ô∏è BUREAUCRATIC RESPONSE: While procedurally correct, this approach may damage internal relationships and miss the educational opportunity.",
                        coaching: "Sometimes direct ethical guidance is more effective than formal reporting. Consider coaching colleagues toward better decisions before escalating."
                    }
                ]
            }
        ];
        
        // Initialize background particles
        function createParticles() {
            const particleContainer = document.getElementById('particles');
            for (let i = 0; i < 20; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                particle.style.left = Math.random() * 100 + '%';
                particle.style.top = Math.random() * 100 + '%';
                particle.style.width = Math.random() * 6 + 2 + 'px';
                particle.style.height = particle.style.width;
                particle.style.animationDelay = Math.random() * 6 + 's';
                particle.style.animationDuration = (Math.random() * 4 + 4) + 's';
                particleContainer.appendChild(particle);
            }
        }
        
        // Character selection
        function selectCharacter(character) {
            selectedCharacter = character;
            document.querySelectorAll('.character-option').forEach(option => {
                option.classList.remove('selected');
            });
            document.querySelector(`[data-character="${character}"]`).classList.add('selected');
            
            // Update player info
            const charData = characters[character];
            document.getElementById('player-avatar').textContent = charData.avatar;
            document.getElementById('player-name').textContent = charData.name;
            document.getElementById('player-title').textContent = charData.title;
            
            document.getElementById('start-mission').disabled = false;
        }
        
        // Start the game
        function startMission() {
            document.getElementById('welcome-screen').classList.remove('active');
            showMission();
        }
        
        // Display current mission
        function showMission() {
            if (currentQuestion >= missions.length) {
                showFinalScreen();
                return;
            }
            
            const mission = missions[currentQuestion];
            document.getElementById('scenario-title').textContent = mission.title;
            document.getElementById('scenario-text').textContent = mission.text;
            
            if (mission.quote) {
                document.getElementById('scenario-quote').style.display = 'block';
                document.getElementById('scenario-quote').textContent = mission.quote;
            }
            
            let detailsHtml = '<div style="margin: 20px 0;"><strong>üìã Mission Data:</strong><ul style="margin: 10px 0 0 20px;">';
            mission.details.forEach(detail => {
                detailsHtml += `<li style="margin: 8px 0; color: #e0e0e0;">${detail}</li>`;
            });
            detailsHtml += '</ul></div>';
            document.getElementById('scenario-details').innerHTML = detailsHtml;
            
            // Create choice cards
            const choicesGrid = document.getElementById('choices-grid');
            choicesGrid.innerHTML = '';
            
            mission.choices.forEach((choice, index) => {
                const choiceCard = document.createElement('div');
                choiceCard.className = 'choice-card';
                choiceCard.innerHTML = `
                    <span class="choice-letter">${choice.letter}</span>
                    <span class="choice-text">${choice.text}</span>
                `;
                choiceCard.onclick = () => selectChoice(index, choiceCard);
                choicesGrid.appendChild(choiceCard);
            });
            
            document.getElementById('question-screen').classList.add('active');
            updateProgress();
        }
        
        // Select a choice
        function selectChoice(index, element) {
            document.querySelectorAll('.choice-card').forEach(card => {
                card.classList.remove('selected');
            });
            element.classList.add('selected');
            selectedChoice = index;
            document.getElementById('proceed-to-betting').disabled = false;
        }
        
        // Proceed to betting phase
        function proceedToBetting() {
            document.getElementById('question-screen').classList.remove('active');
            document.getElementById('betting-screen').classList.add('active');
            
            // Update bet options based on current credits
            document.querySelectorAll('.bet-card').forEach(card => {
                const bet = card.dataset.bet;
                if (bet !== 'all' && parseInt(bet) > credits) {
                    card.style.opacity = '0.3';
                    card.style.pointerEvents = 'none';
                } else {
                    card.style.opacity = '1';
                    card.style.pointerEvents = 'auto';
                }
            });
        }
        
        // Select betting amount
        function selectBet(amount) {
            document.querySelectorAll('.bet-card').forEach(card => {
                card.classList.remove('selected');
            });
            event.target.closest('.bet-card').classList.add('selected');
            selectedBet = amount;
            document.getElementById('execute-decision').disabled = false;
        }
        
        // Execute the decision and show results
        function executeDecision() {
            const mission = missions[currentQuestion];
            const choice = mission.choices[selectedChoice];
            const betAmount = selectedBet === 'all' ? credits : selectedBet;
            
            let creditChange = 0;
            let resultIcon = '';
            let resultTitle = '';
            let resultClass = '';
            
            // Calculate results
            if (choice.result === 'correct') {
                correctAnswers++;
                if (selectedBet === 'all') {
                    creditChange = credits;
                    credits *= 2;
                } else {
                    creditChange = betAmount;
                    credits += betAmount;
                }
                resultIcon = 'üéØ';
                resultTitle = '‚úÖ MISSION SUCCESS!';
                resultClass = 'success';
            } else if (choice.result === 'wrong') {
                creditChange = -betAmount;
                credits = Math.max(0, credits - betAmount);
                resultIcon = 'üí•';
                resultTitle = '‚ùå MISSION COMPROMISED!';
                resultClass = 'failure';
            } else { // partial
                creditChange = 0;
                resultIcon = '‚ö†Ô∏è';
                resultTitle = '‚ö†Ô∏è PARTIAL SUCCESS';
                resultClass = 'partial';
            }
            
            // Handle bankruptcy
            if (credits === 0) {
                credits = 25; // Emergency backup credits
                creditChange = 25;
                resultTitle += ' - EMERGENCY BACKUP ACTIVATED!';
            }
            
            // Show result modal
            document.getElementById('betting-screen').classList.remove('active');
            showResultModal(resultIcon, resultTitle, choice.feedback, choice.coaching, creditChange);
            updateCreditsDisplay();
        }
        
        // Show result modal
        function showResultModal(icon, title, description, coaching, creditChange) {
            document.getElementById('result-icon').textContent = icon;
            document.getElementById('result-title').textContent = title;
            document.getElementById('result-description').textContent = description;
            document.getElementById('coaching-text').textContent = coaching;
            
            let creditText = '';
            let creditColor = '';
            if (creditChange > 0) {
                creditText = `+${creditChange} Credits Earned! üí∞`;
                creditColor = '#00ff00';
            } else if (creditChange < 0) {
                creditText = `${creditChange} Credits Lost! üí∏`;
                creditColor = '#ff4444';
            } else {
                creditText = 'No Credit Change';
                creditColor = '#ffaa00';
            }
            
            const creditChangeEl = document.getElementById('credit-change');
            creditChangeEl.textContent = creditText;
            creditChangeEl.style.color = creditColor;
            
            document.getElementById('result-modal').classList.add('active');
        }
        
        // Continue to next mission
        function continueMission() {
            document.getElementById('result-modal').classList.remove('active');
            selectedChoice = null;
            selectedBet = null;
            currentQuestion++;
            showMission();
        }
        
        // Show final results
        function showFinalScreen() {
            document.getElementById('result-modal').classList.remove('active');
            
            let rank = 'Digital Apprentice';
            let rankColor = '#ff4444';
            let message = '';
            let riskScore = 'D';
            
            const successRate = Math.round((correctAnswers / missions.length) * 100);
            
            if (credits >= 200) {
                rank = 'üèÜ Digital Ethics Master';
                rankColor = '#ffd700';
                message = 'üéâ LEGENDARY PERFORMANCE! You have mastered the art of ethical decision-making in the digital realm. Your balanced approach to risk and principles makes you a true leader in the field.';
                riskScore = 'S+';
            } else if (credits >= 150) {
                rank = 'üéñÔ∏è Senior Digital Analyst';
                rankColor = '#00ff00';
                message = '‚≠ê EXCELLENT WORK! You demonstrate strong ethical judgment with room for more confident decision-making. Push your limits when you\'re certain!';
                riskScore = 'A';
            } else if (credits >= 100) {
                rank = 'üéØ Certified Analyst';
                rankColor = '#00aaff';
                message = 'üëç SOLID PERFORMANCE! You maintained stability while learning. Consider taking more calculated risks when you have high confidence in your analysis.';
                riskScore = 'B';
            } else if (credits >= 50) {
                rank = 'üìö Ethics Student';
                rankColor = '#ffaa00';
                message = 'üìñ LEARNING IN PROGRESS! Review the AI coaching tips and practice your risk assessment skills. Every expert was once a beginner!';
                riskScore = 'C';
            } else {
                rank = 'üå± Digital Apprentice';
                rankColor = '#ff6666';
                message = 'üöÄ GROWTH OPPORTUNITY! The digital ethics frontier is challenging, but every failure teaches valuable lessons. Retry the missions with new insights!';
                riskScore = 'D';
            }
            
            document.getElementById('final-credits').textContent = credits;
            document.getElementById('success-rate').textContent = successRate + '%';
            document.getElementById('risk-score').textContent = riskScore;
            document.getElementById('final-rank').textContent = rank;
            document.getElementById('final-rank').style.background = `linear-gradient(135deg, ${rankColor}, ${rankColor}88)`;
            document.getElementById('final-message').innerHTML = `<p style="font-size: 1.2em; line-height: 1.6;">${message}</p>`;
            
            document.getElementById('final-screen').classList.add('active');
            updateProgress(100);
        }
        
        // Update credits display
        function updateCreditsDisplay() {
            document.getElementById('coin-amount').textContent = credits;
        }
        
        // Update progress bar
        function updateProgress(override) {
            const progress = override !== undefined ? override : (currentQuestion / missions.length) * 100;
            document.getElementById('progress-fill').style.width = progress + '%';
            document.getElementById('progress-text').textContent = `${currentQuestion}/${missions.length}`;
        }
        
        // Restart the game
        function restartMission() {
            currentQuestion = 0;
            credits = 100;
            selectedChoice = null;
            selectedBet = null;
            correctAnswers = 0;
            selectedCharacter = null;
            
            // Reset UI
            document.getElementById('final-screen').classList.remove('active');
            document.getElementById('welcome-screen').classList.add('active');
            document.querySelectorAll('.character-option').forEach(option => {
                option.classList.remove('selected');
            });
            document.getElementById('start-mission').disabled = true;
            
            // Reset player display
            document.getElementById('player-avatar').textContent = 'üë§';
            document.getElementById('player-name').textContent = 'Agent Rookie';
            document.getElementById('player-title').textContent = 'Ethics Trainee';
            
            updateCreditsDisplay();
            updateProgress(0);
        }
        
        // Initialize the game
        document.addEventListener('DOMContentLoaded', function() {
            createParticles();
            updateCreditsDisplay();
            updateProgress(0);
        });
    </script>
</body>
</html>
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Analog Integrity Grid - SIMULATOR</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Exo+2:wght@300;400;600;700&display=swap');
        /* Custom fonts - ES Klarheit Kurrent and Jogan Soft */
        @font-face {
            font-family: 'ES Klarheit Kurrent';
            src: url('assets/fonts/ESKlarheitKurrent.woff2') format('woff2'),
                 url('assets/fonts/ESKlarheitKurrent.woff') format('woff');
            font-weight: normal;
            font-style: normal;
            font-display: swap;
        }
        
        @font-face {
            font-family: 'Jogan Soft';
            src: url('assets/fonts/JoganSoft.woff2') format('woff2'),
                 url('assets/fonts/JoganSoft.woff') format('woff');
            font-weight: normal;
            font-style: normal;
            font-display: swap;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        :root {
            /* New dark theme colors */
            --bg-primary: #1a1a2e;
            --bg-secondary: #16213e;
            --bg-card: #0f172a;
            --purple-primary: #8b5cf6;
            --purple-secondary: #a78bfa;
            --purple-accent: #c4b5fd;
            --cyan-accent: #06b6d4;
            --pink-accent: #ec4899;
            --orange-accent: #f97316;
            --green-success: #10b981;
            --red-danger: #ef4444;
            --text-primary: #f8fafc;
            --text-secondary: #cbd5e1;
            --text-muted: #64748b;
        }
        
        body {
            font-family: 'Jogan Soft', 'Exo 2', sans-serif;
            background: #1F1F1F;
            min-height: 100vh;
            overflow-x: hidden;
            color: var(--text-primary);
            position: relative;
        }
        
        /* Complex animated background */
        .bg-particles {
            position: fixed;
            width: 100%;
            height: 100%;
            overflow: hidden;
            z-index: -1;
        }
        
        .bg-blur-layer {
            position: absolute;
            border-radius: 50%;
            filter: blur(32px);
            animation: float-blur 8s ease-in-out infinite;
        }
        
        .blur-fuchsia {
            background: #C764A1;
            opacity: 0.5;
        }
        
        .blur-violet {
            background: #7E35EF;
            opacity: 0.6;
        }
        
        .blur-purple {
            background: #683DE5;
            opacity: 0.4;
        }
        
        .blur-white {
            background: white;
            opacity: 0.3;
        }
        
        .blur-sunset {
            background: #AE86B1;
            opacity: 0.4;
        }
        
        @keyframes float-blur {
            0%, 100% { transform: translate(0, 0) scale(1); }
            33% { transform: translate(30px, -20px) scale(1.1); }
            66% { transform: translate(-20px, 30px) scale(0.9); }
        }
        
        .particle {
            position: absolute;
            background: rgba(126, 63, 239, 0.1);
            border-radius: 50%;
            animation: float 6s ease-in-out infinite;
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0px) rotate(0deg); opacity: 0.1; }
            50% { transform: translateY(-20px) rotate(180deg); opacity: 0.3; }
        }
        
        .game-container {
            background: transparent;
            border-radius: 0;
            border: none;
            box-shadow: none;
            max-width: 971px;
            width: 95%;
            margin: 0 auto;
            overflow: visible;
            position: relative;
            min-height: 1552px;
        }
        
        .header {
            background: transparent;
            color: var(--text-primary);
            padding: 33px 0;
            text-align: center;
            position: relative;
            overflow: visible;
            width: 440px;
            height: 145px;
            margin: 0 auto;
        }
        
        .header::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(253, 214, 237, 0.2), transparent);
            animation: scan 3s linear infinite;
        }
        
        @keyframes scan {
            0% { left: -100%; }
            100% { left: 100%; }
        }
        
        .header h1 {
            font-family: 'ES Klarheit Kurrent', 'Orbitron', monospace;
            font-size: 2.1em;
            margin-bottom: 5px;
            font-weight: 600;
            color: #FFA0DA;
            line-height: 29px;
            z-index: 2;
            position: relative;
        }
        
        .header p {
            font-size: 1.2em;
            opacity: 0.9;
            z-index: 2;
            position: relative;
        }
        
        .hud {
            background: linear-gradient(124deg, #A77FDF 0%, #160F20 100%);
            box-shadow: 0px 4px 4px rgba(0, 0, 0, 0.25);
            border-radius: 16px;
            padding: 12px 19px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: relative;
            margin: 0 auto 20px;
            max-width: 772px;
            height: 153px;
        }
        
        .character-avatar {
            width: 80px;
            height: 80px;
            border-radius: 15px;
            border: 2px solid var(--purple-primary);
            background: linear-gradient(135deg, var(--orange-accent), var(--purple-primary));
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2.5em;
            position: relative;
            overflow: hidden;
        }
        
        @keyframes pulse {
            0%, 100% { box-shadow: 0 0 20px rgba(199, 100, 161, 0.3); }
            50% { box-shadow: 0 0 40px rgba(199, 100, 161, 0.7); }
        }
        
        .player-info {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }
        
        .player-name {
            font-family: 'ES Klarheit Kurrent', 'Orbitron', monospace;
            font-weight: 700;
            color: var(--text-primary);
            font-size: 1.2em;
        }
        
        .player-title {
            color: var(--text-secondary);
            font-size: 0.9em;
        }
        
        .coin-display {
            display: flex;
            align-items: center;
            gap: 15px;
            background: rgba(139, 92, 246, 0.1);
            padding: 15px 25px;
            border-radius: 15px;
            border: 1px solid var(--purple-primary);
        }
        
        .coin-icon {
            width: 42px;
            height: 42px;
            background: linear-gradient(0deg, #725897 0%, #725897 100%), rgba(6.25, 2.68, 11.33, 0.42);
            box-shadow: 0px 1px 1.3px rgba(0, 0, 0, 0.28);
            border-radius: 300px;
            outline: 0.5px #AE86B1 solid;
            outline-offset: -0.5px;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            font-size: 0;
        }
        
        .coin-icon::after {
            content: '';
            width: 38px;
            height: 38px;
            background: linear-gradient(180deg, #FDD9ED 0%, #725897 100%);
            box-shadow: 0px 0px 0.9px 1px #AE86B1 inset;
            border-radius: 50%;
            position: absolute;
        }
        
        @keyframes rotate {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        
        .coin-amount {
            font-family: 'ES Klarheit Kurrent', 'Orbitron', monospace;
            font-size: 1.8em;
            font-weight: 700;
            color: var(--text-primary);
        }
        
        .progress-section {
            display: flex;
            flex-direction: column;
            gap: 10px;
            min-width: 200px;
        }
        
        .progress-label {
            color: var(--violet);
            font-weight: 600;
            text-align: center;
        }
        
        .progress-bar {
            background: rgba(126, 63, 239, 0.1);
            border-radius: 10px;
            height: 12px;
            border: 1px solid var(--violet);
            overflow: hidden;
        }
        
        .progress-fill {
            background: linear-gradient(90deg, var(--fuchsia), var(--blue));
            height: 100%;
            transition: width 0.8s ease;
            box-shadow: 0 0 10px rgba(126, 63, 239, 0.5);
        }
        
        .content {
            padding: 40px;
            min-height: 500px;
            position: relative;
        }
        
        .screen {
            display: none;
            animation: fadeIn 0.5s ease-in;
        }
        
        .screen.active {
            display: block;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .welcome-screen {
            text-align: left;
            background: transparent;
            border-radius: 0;
            padding: 0;
            border: none;
            max-width: 772px;
            margin: 0 auto;
            position: relative;
        }
        
        .welcome-title {
            font-family: 'ES Klarheit Kurrent', 'Orbitron', monospace;
            font-size: 24px;
            color: #FFA0DA;
            font-weight: 600;
            line-height: 29px;
            margin-bottom: 20px;
            text-align: left;
        }
        
        .character-selection {
            display: flex;
            justify-content: center;
            gap: 56px;
            margin: 40px 0;
        }
        
        .character-option {
            cursor: pointer;
            width: 208px;
            height: 274px;
            border-radius: 17px;
            border: 1px solid #FCDAEF;
            background: linear-gradient(180deg, rgba(92.13, 62.81, 134, 0) 0%, #160F20 100%);
            position: relative;
            transition: all 0.3s ease;
            overflow: hidden;
        }
        
        .character-option::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(180deg, rgba(22.02, 15.14, 31.79, 0) 0%, #5D4086 100%);
            mix-blend-mode: screen;
            pointer-events: none;
        }
        
        .character-option:hover {
            transform: translateY(-8px);
            box-shadow: 0 15px 40px rgba(252, 218, 239, 0.3);
        }
        
        .character-option.selected {
            border-color: #FF7CCD;
            box-shadow: 0 0 30px rgba(255, 124, 205, 0.4);
            transform: translateY(-5px);
        }
        
        .character-option.selected::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(0deg, rgba(0, 0, 0, 0.20) 0%, rgba(0, 0, 0, 0.20) 100%);
            pointer-events: none;
        }
        
        .character-icon {
            width: 128px;
            height: 125px;
            margin: 34px auto 16px 40px;
            border-radius: 0;
            background: linear-gradient(140deg, #160F20 0%, #5D4086 100%);
            box-shadow: 0px 1px 2.4px rgba(0, 0, 0, 0.25);
            border: 1px solid #FF7CCD;
            position: relative;
        }
        
        .character-name {
            font-family: 'ES Klarheit Kurrent', 'Orbitron', monospace;
            font-weight: 700;
            color: white;
            font-size: 20px;
            line-height: 29px;
            position: absolute;
            bottom: 61px;
            left: 41px;
        }
        
        .character-role {
            color: #FFA0DA;
            font-size: 15px;
            font-family: 'ES Klarheit Kurrent', 'Orbitron', monospace;
            font-weight: 450;
            line-height: 29px;
            position: absolute;
            bottom: 88px;
            left: 41px;
        }
        
        .character-role::before {
            content: 'Agent';
            display: block;
            margin-bottom: -18px;
        }
        
        .scenario-card {
            background: var(--bg-secondary);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            border: 1px solid var(--purple-primary);
            position: relative;
            overflow: hidden;
        }
        
        .scenario-card::before {
            content: 'üîê';
            position: absolute;
            top: 15px;
            left: 20px;
            font-size: 1.5em;
            opacity: 0.7;
        }
        
        @keyframes glow {
            from { opacity: 0.5; }
            to { opacity: 1; }
        }
        
        .scenario-title {
            font-family: 'ES Klarheit Kurrent', 'Orbitron', monospace;
            color: var(--text-primary);
            margin-bottom: 20px;
            font-size: 1.4em;
            font-weight: 700;
            margin-left: 40px;
        }
        
        .scenario-text {
            line-height: 1.6;
            margin-bottom: 20px;
            color: var(--text-secondary);
        }
        
        .scenario-quote {
            background: var(--bg-card);
            border-left: 4px solid var(--cyan-accent);
            padding: 20px;
            font-style: italic;
            border-radius: 0 10px 10px 0;
            margin: 20px 0;
            color: var(--text-primary);
        }
        
        .choices-grid {
            display: grid;
            gap: 20px;
            margin-top: 30px;
        }
        
        .choice-card {
            background: rgba(0, 20, 40, 0.7);
            border: 2px solid rgba(0, 255, 255, 0.2);
            border-radius: 15px;
            padding: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .choice-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(0, 255, 255, 0.1), transparent);
            transition: left 0.5s;
        }
        
        .choice-card:hover::before {
            left: 100%;
        }
        
        .choice-card:hover {
            border-color: #00ffff;
            transform: translateX(10px);
            box-shadow: 0 5px 25px rgba(0, 255, 255, 0.2);
        }
        
        .choice-card.selected {
            border-color: #ffd700;
            background: rgba(255, 215, 0, 0.1);
            transform: translateX(10px);
        }
        
        .choice-letter {
            font-family: 'ES Klarheit Kurrent', 'Orbitron', monospace;
            font-weight: 700;
            color: #00ffff;
            font-size: 1.3em;
            margin-right: 15px;
        }
        
        .choice-text {
            color: #e0e0e0;
            position: relative;
            z-index: 2;
        }
        
        .betting-arena {
            background: var(--bg-card);
            border-radius: 20px;
            padding: 30px;
            border: 1px solid var(--purple-primary);
            margin: 30px 0;
            position: relative;
        }
        
        .betting-arena::before {
            content: '‚ö°';
            position: absolute;
            top: 15px;
            right: 20px;
            font-size: 2em;
            color: rgba(255, 100, 255, 0.5);
            animation: spark 1.5s ease-in-out infinite;
        }
        
        @keyframes spark {
            0%, 100% { transform: scale(1) rotate(0deg); opacity: 0.5; }
            50% { transform: scale(1.2) rotate(180deg); opacity: 1; }
        }
        
        .betting-title {
            font-family: 'ES Klarheit Kurrent', 'Orbitron', monospace;
            color: var(--text-primary);
            font-size: 1.5em;
            margin-bottom: 15px;
        }
        
        .bet-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 25px;
        }
        
        .bet-card {
            background: var(--bg-secondary);
            border: 1px solid var(--purple-primary);
            border-radius: 15px;
            padding: 20px;
            cursor: pointer;
            text-align: center;
            transition: all 0.3s ease;
            position: relative;
        }
        
        .bet-card:hover {
            border-color: var(--purple-secondary);
            transform: scale(1.05);
            box-shadow: 0 10px 30px rgba(139, 92, 246, 0.3);
        }
        
        .bet-card.selected {
            border-color: #ffd700;
            background: rgba(255, 215, 0, 0.1);
            transform: scale(1.05);
        }
        
        .bet-amount {
            font-family: 'ES Klarheit Kurrent', 'Orbitron', monospace;
            font-size: 1.8em;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 10px;
        }
        
        .bet-risk {
            color: var(--text-muted);
            font-size: 0.9em;
        }
        
        .game-button {
            padding: 2.82px;
            background: conic-gradient(from 180deg at 50.00% 50.00%, #120020 0deg, #C764A1 53deg, #AE86B1 90deg, #7E35EF 126deg);
            border-radius: 140.8px;
            border: none;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 20px 10px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
        }
        
        .game-button-inner {
            background: linear-gradient(90deg, #5D4086 0%, #160F20 100%);
            border-radius: 140.8px;
            backdrop-filter: blur(21.12px);
            padding: 22px 45px;
            color: #FDD9ED;
            font-size: 20.88px;
            font-family: 'ES Klarheit Kurrent', 'Orbitron', monospace;
            font-weight: 500;
            line-height: 24.31px;
            border: none;
            background-color: transparent;
        }
        
        .game-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 30px rgba(139, 92, 246, 0.5);
        }
        
        .game-button:disabled {
            opacity: 0.4;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
            pointer-events: none;
        }
        
        .game-button:not(:disabled) {
            opacity: 1;
            pointer-events: auto;
            cursor: pointer;
        }
        
        .result-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }
        
        .result-modal.active {
            opacity: 1;
            visibility: visible;
        }
        
        .result-card {
            background: var(--bg-card);
            border-radius: 20px;
            border: 2px solid var(--purple-primary);
            padding: 40px;
            max-width: 600px;
            text-align: center;
            animation: slideUp 0.5s ease;
        }
        
        @keyframes slideUp {
            from { transform: translateY(50px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        
        .result-icon {
            font-size: 4em;
            margin-bottom: 20px;
            animation: bounce 1s ease;
        }
        
        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
            40% { transform: translateY(-20px); }
            60% { transform: translateY(-10px); }
        }
        
        .achievement-badge {
            background: linear-gradient(135deg, #ffd700, #ffb347);
            color: #000;
            padding: 10px 20px;
            border-radius: 25px;
            font-family: 'ES Klarheit Kurrent', 'Orbitron', monospace;
            font-weight: 700;
            margin: 20px 0;
            display: inline-block;
            animation: glow 2s ease-in-out infinite alternate;
        }
        
        .final-stats {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin: 30px 0;
        }
        
        .stat-item {
            background: var(--bg-secondary);
            border-radius: 15px;
            padding: 20px;
            border: 1px solid var(--purple-primary);
        }
        
        .stat-number {
            font-family: 'ES Klarheit Kurrent', 'Orbitron', monospace;
            font-size: 2.5em;
            font-weight: 700;
            color: var(--cyan-accent);
        }
        
        .stat-label {
            color: var(--text-muted);
            margin-top: 5px;
        }
        
        @media (max-width: 768px) {
            .header h1 { font-size: 2em; }
            .hud { flex-direction: column; gap: 20px; }
            .character-selection { flex-direction: column; align-items: center; }
            .bet-grid { grid-template-columns: 1fr 1fr; }
            .final-stats { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>
    <div class="bg-particles" id="particles"></div>
    
    <div class="game-container">
        <div class="header">
            <h1>The Analog Integrity Grid</h1>
            <div style="font-size: 15px; font-family: 'ES Klarheit Kurrent', 'Orbitron', monospace; font-weight: 600; letter-spacing: 38.25px; color: white; line-height: 29px;">SIMULATOR</div>
        </div>
        
        <div class="hud">
            <div style="display: flex; align-items: center; gap: 20px;">
                <div class="character-avatar" id="player-avatar">üë§</div>
                <div class="player-info">
                    <div style="color: #FFA0DA; font-size: 15px; font-family: 'ES Klarheit Kurrent'; font-weight: 450; line-height: 29px; margin-bottom: -18px;">Agent</div>
                    <div class="player-name" id="player-name">Rookie</div>
                </div>
            </div>
            
            <div style="display: flex; flex-direction: column; align-items: flex-end; gap: 10px;">
                <div class="coin-display">
                    <div style="color: white; font-size: 15px; font-family: 'ES Klarheit Kurrent'; font-weight: 450; line-height: 29px;">Total Anacoins</div>
                    <div style="display: flex; align-items: center; gap: 8px;">
                        <div class="coin-icon"></div>
                        <div class="coin-amount" id="coin-amount" style="font-size: 40px; font-weight: 700; line-height: 29px;">100</div>
                    </div>
                </div>
            </div>
            
            <div class="progress-section">
                <div class="progress-label" style="color: white; font-size: 15px; font-family: 'ES Klarheit Kurrent'; font-weight: 600; line-height: 29px; margin-bottom: 4px;">Agent Progress</div>
                <div class="progress-bar">
                    <div class="progress-fill" id="progress-fill"></div>
                    <div class="progress-text" id="progress-text">0/3</div>
                </div>
            </div>
        </div>
        
        <div class="content">
            <!-- Welcome Screen -->
            <div class="screen active" id="welcome-screen">
                <div class="welcome-screen">
                    <h2 class="welcome-title">Welcome to the Grid, User</h2>
                    <p style="font-size: 15px; margin-bottom: 40px; color: #A9A9A9; font-family: 'ES Klarheit Kurrent'; font-weight: 600; line-height: 21px; width: 729px;">
                        As a new recruit, your mission is to navigate the gray zones of digital ethics.<br/>
                        Every decision counts, and each choice sends ripples from the digital world into the real one.
                    </p>
                    
                    <div style="width: 772px; height: 151px; background: #5B4579; border-radius: 16px; box-shadow: 0px 4px 4px rgba(0, 0, 0, 0.25); padding: 19px; margin-bottom: 40px; overflow: hidden; position: relative;">
                        <div style="position: absolute; top: -18px; right: 0; width: 571px; height: 187px; background: linear-gradient(270deg, #160F20 0%, rgba(22, 15, 32, 0) 100%);"></div>
                        <h3 style="color: #FFA0DA; font-size: 24px; font-family: 'ES Klarheit Kurrent'; font-weight: 700; line-height: 19px; margin-bottom: 15px;">Mission Protocol: The Integrity Grid</h3>
                        <p style="margin-bottom: 8px; color: white; font-size: 15px; font-family: 'ES Klarheit Kurrent'; font-weight: 450; line-height: 19px;">You start with <span style="color: #FFA0DA;">100 Anacoins</span></p>
                        <p style="margin-bottom: 8px; color: white; font-size: 15px; font-family: 'ES Klarheit Kurrent'; font-weight: 450; line-height: 19px;">Every bet reflects your confidence</p>
                        <p style="margin-bottom: 8px; color: white; font-size: 15px; font-family: 'ES Klarheit Kurrent'; font-weight: 450; line-height: 19px;">The bigger the risk, the greater the cost of a wrong call</p>
                        <p style="color: white; font-size: 15px; font-family: 'ES Klarheit Kurrent'; font-weight: 450; line-height: 19px;">Surpass <span style="color: #FFA0DA;">200 Anacoins</span> and earn your rank as <span style="color: #FFA0DA;">The Analogist</span></p>
                    </div>
                    
                    <h3 style="color: #FFA0DA; font-size: 24px; font-family: 'ES Klarheit Kurrent'; font-weight: 600; line-height: 29px; margin: 40px 0 15px;">Choose your Agent</h3>
                    <p style="color: #A9A9A9; font-size: 15px; font-family: 'ES Klarheit Kurrent'; font-weight: 600; line-height: 21px; margin-bottom: 30px;">Pick an agent that best represents you-</p>
                    <div class="character-selection" id="character-selection">
                        <div class="character-option" data-character="sakura" onclick="selectCharacter('sakura')">
                            <div class="character-icon"></div>
                            <div class="character-role">The Strategist</div>
                            <div class="character-name">Sakura</div>
                        </div>
                        <div class="character-option" data-character="nova" onclick="selectCharacter('nova')">
                            <div class="character-icon"></div>
                            <div class="character-role">The Analytical Mind</div>
                            <div class="character-name">Nova</div>
                        </div>
                        <div class="character-option" data-character="sentinel" onclick="selectCharacter('sentinel')">
                            <div class="character-icon"></div>
                            <div class="character-role">The Guardian</div>
                            <div class="character-name">Sentinel</div>
                        </div>
                    </div>
                    
                    <button class="game-button" id="start-mission" onclick="startMission()" disabled>
                        <div class="game-button-inner">Start Mission</div>
                    </button>
                </div>
            </div>
            
            <!-- Question Screen -->
            <div class="screen" id="question-screen">
                <div class="scenario-card">
                    <div class="scenario-title" id="scenario-title">Mission Briefing</div>
                    <div class="scenario-text" id="scenario-text"></div>
                    <div class="scenario-quote" id="scenario-quote" style="display: none;"></div>
                    <div id="scenario-details"></div>
                </div>
                
                <div class="choices-grid" id="choices-grid">
                    <!-- Choices populated by JavaScript -->
                </div>
                
                <button class="game-button" id="proceed-to-betting" onclick="proceedToBetting()" disabled>
                    ‚ö° Analyze & Decide
                </button>
            </div>
            
            <!-- Betting Screen -->
            <div class="screen" id="betting-screen">
                <div class="betting-arena">
                    <div class="betting-title">Confidence Matrix</div>
                    <p style="color: var(--text-secondary); margin-bottom: 20px;">
                        How certain are you about your analysis? Higher stakes yield greater rewards... but also greater risks.
                    </p>
                    
                    <div class="bet-grid" id="bet-grid">
                        <div class="bet-card" data-bet="10" onclick="selectBet(10)">
                            <div style="display: flex; align-items: center; justify-content: center; gap: 10px; margin-bottom: 10px;">
                                <div style="width: 30px; height: 30px; border-radius: 50%; background: var(--purple-primary); display: flex; align-items: center; justify-content: center; color: white; font-size: 0.8em;">‚Çø</div>
                                <div class="bet-amount">10</div>
                            </div>
                            <div class="bet-risk">Safe Play</div>
                        </div>
                        <div class="bet-card" data-bet="30" onclick="selectBet(30)">
                            <div style="display: flex; align-items: center; justify-content: center; gap: 10px; margin-bottom: 10px;">
                                <div style="width: 30px; height: 30px; border-radius: 50%; background: var(--purple-primary); display: flex; align-items: center; justify-content: center; color: white; font-size: 0.8em;">‚Çø</div>
                                <div class="bet-amount">30</div>
                            </div>
                            <div class="bet-risk">Calculated Risk</div>
                        </div>
                        <div class="bet-card" data-bet="50" onclick="selectBet(50)">
                            <div style="display: flex; align-items: center; justify-content: center; gap: 10px; margin-bottom: 10px;">
                                <div style="width: 30px; height: 30px; border-radius: 50%; background: var(--purple-primary); display: flex; align-items: center; justify-content: center; color: white; font-size: 0.8em;">‚Çø</div>
                                <div class="bet-amount">50</div>
                            </div>
                            <div class="bet-risk">High Confidence</div>
                        </div>
                        <div class="bet-card" data-bet="all" onclick="selectBet('all')">
                            <div style="display: flex; align-items: center; justify-content: center; gap: 10px; margin-bottom: 10px;">
                                <div style="width: 30px; height: 30px; border-radius: 50%; background: var(--purple-primary); display: flex; align-items: center; justify-content: center; color: white; font-size: 0.8em;">‚Çø</div>
                                <div class="bet-amount">ALL IN</div>
                            </div>
                            <div class="bet-risk">Maximum Risk</div>
                        </div>
                    </div>
                    
                    <button class="game-button" id="execute-decision" onclick="executeDecision()" disabled>
                        üéØ Execute Decision
                    </button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Result Modal -->
    <div class="result-modal" id="result-modal">
        <div class="result-card">
            <div class="result-icon" id="result-icon">üéØ</div>
            <h2 id="result-title">Mission Analysis</h2>
            <p id="result-description" style="margin: 20px 0; font-size: 1.1em;"></p>
            <div id="credit-change" style="font-size: 1.3em; font-weight: bold; margin: 20px 0;"></div>
            
            <div style="background: var(--bg-secondary); padding: 20px; border-radius: 15px; margin: 25px 0; border-left: 4px solid var(--cyan-accent);">
                <h4 style="color: var(--cyan-accent); margin-bottom: 10px;">AI + FEEDBACK</h4>
                <p id="coaching-text" style="color: var(--text-secondary);"></p>
            </div>
            
            <button class="game-button" id="continue-mission" onclick="continueMission()">
                ‚û°Ô∏è Continue Mission
            </button>
        </div>
    </div>
    
    <!-- Final Screen -->
    <div class="screen" id="final-screen">
        <div style="text-align: center;">
            <h2 style="font-family: 'Orbitron', monospace; color: var(--cyan-accent); font-size: 2.5em; margin-bottom: 30px;">
                INTEGRITY<br>MISSION SUCCESSFUL!
            </h2>
            
            <div class="achievement-badge" id="final-rank">THE ANALOGIST</div>
            
            <div class="final-stats">
                <div class="stat-item">
                    <div class="stat-number" id="final-credits">450</div>
                    <div class="stat-label">Total Anacoins</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number" id="success-rate">100%</div>
                    <div class="stat-label">Success Rate</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number" id="risk-score">A+</div>
                    <div class="stat-label">Risk Management</div>
                </div>
            </div>
            
            <div id="final-message" style="background: rgba(0, 255, 255, 0.1); padding: 30px; border-radius: 20px; margin: 30px 0; border: 2px solid rgba(0, 255, 255, 0.3);">
                <!-- Final message populated by JavaScript -->
            </div>
            
            <button class="game-button" onclick="restartMission()">
                üîÑ New Mission
            </button>
        </div>
    </div>

    <script>
        // Game state
        let currentQuestion = 0;
        let credits = 100;
        let selectedChoice = null;
        let selectedBet = null;
        let correctAnswers = 0;
        let selectedCharacter = null;
        
        // Character data
        const characters = {
            sakura: {
                name: "Agent Sakura",
                title: "The Strategist", 
                avatar: "üå∏",
                description: "Strategic and diplomatic"
            },
            nova: {
                name: "Agent Nova",
                title: "The Analytical Mind",
                avatar: "‚≠ê", 
                description: "Data-driven and methodical"
            },
            sentinel: {
                name: "Agent Sentinel",
                title: "The Guardian",
                avatar: "üõ°Ô∏è",
                description: "Protective and principled"
            }
        };
        
        // Enhanced questions with gaming narrative
        const missions = [
            {
                title: "üîê Mission Alpha: Data Fortress Breach",
                text: "You're coordinating a critical client operation when a partner engineer from Analog's allied tech consortium sends an urgent transmission:",
                quote: "\"I need immediate access to the complete mission files - client benchmarks, system logs, everything. The operation launches in T-minus 12 hours.\"",
                details: [
                    "üèóÔ∏è System architecture blueprints (CLASSIFIED)",
                    "üìä High-level performance metrics (PUBLIC)", 
                    "üíæ Raw system logs with IP traces, user signatures, timestamps (SENSITIVE)",
                    "üóÉÔ∏è Client datasets with labeled training data and identifiers (CONFIDENTIAL)",
                    "‚ö° Benchmark results tied to proprietary client algorithms (TOP SECRET)"
                ],
                choices: [
                    {
                        letter: "A",
                        text: "üö® IMMEDIATE TRANSFER: Send complete data package instantly to maintain operational tempo",
                        result: "wrong",
                        feedback: "‚ùå SECURITY BREACH DETECTED! You've compromised classified client data without proper authorization protocols. The digital ethics violation triggers immediate containment procedures.",
                        coaching: "In high-pressure cyber operations, speed cannot override security protocols. Every classified data transfer requires proper clearance chains to prevent catastrophic breaches."
                    },
                    {
                        letter: "B", 
                        text: "üîç SELECTIVE DISCLOSURE: Share public architecture and metrics, escalate classified materials through proper channels",
                        result: "correct",
                        feedback: "‚úÖ OPTIMAL STRATEGY! You've maintained operational efficiency while protecting sensitive assets. Your security protocols are exemplary.",
                        coaching: "Perfect balance of collaboration and security. You've proven that effective teamwork doesn't require compromising ethical standards or data integrity."
                    },
                    {
                        letter: "C",
                        text: "üõ°Ô∏è FULL LOCKDOWN: Deny all access until complete security clearance verification is obtained",
                        result: "partial",
                        feedback: "‚ö†Ô∏è OVERLY CAUTIOUS: While security is maintained, operational efficiency has been compromised. The mission timeline faces potential delays.",
                        coaching: "Sometimes perfect security can hinder legitimate collaboration. Look for ways to enable safe data sharing while maintaining necessary protections."
                    }
                ]
            },
            {
                title: "üß† Mission Beta: The Biased Algorithm Crisis",
                text: "During final testing of Analog's revolutionary AI recommendation engine, your diagnostic scans reveal a critical flaw. The system shows systematic bias against certain demographic clusters. T-minus 24 hours until client deployment.",
                quote: "Your mission commander transmits: 'The client expects delivery tomorrow. We can patch this in version 2.0. The corporate announcement is already live.'",
                details: [
                    "‚ö†Ô∏è AI model shows 15% accuracy degradation for underrepresented groups",
                    "üì¢ Client has already made public launch announcements", 
                    "üîß Fix requires complete retraining with balanced datasets - 3 week timeline",
                    "üèÉ‚Äç‚ôÇÔ∏è Deployment delay means missing critical market window",
                    "‚öñÔ∏è Legal confirms current model meets minimum compliance thresholds",
                    "üéØ Ethical implications could affect thousands of users daily"
                ],
                choices: [
                    {
                        letter: "A",
                        text: "üì¶ DEPLOY AS SCHEDULED: Ship current model, document bias for future iterations",
                        result: "wrong",
                        feedback: "‚ùå ETHICAL VIOLATION! Deploying biased AI systems violates Analog's core principles and could harm real users. Your decision prioritizes deadlines over human welfare.",
                        coaching: "In the digital age, algorithmic bias isn't just a technical debt - it's an ethical debt that directly impacts people's lives. Some things cannot be compromised for business timelines."
                    },
                    {
                        letter: "B",
                        text: "üö® STRATEGIC ESCALATION: Alert leadership with comprehensive bias analysis and rapid mitigation proposal",
                        result: "correct", 
                        feedback: "‚úÖ LEADERSHIP EXCELLENCE! You've identified a critical issue and proposed solutions rather than just problems. This is how ethical leaders operate in crisis situations.",
                        coaching: "Outstanding judgment under pressure. You've demonstrated that true leadership means protecting users while finding creative solutions to business challenges."
                    },
                    {
                        letter: "C",
                        text: "üõë ABSOLUTE HALT: Refuse deployment and demand full retraining regardless of business impact",
                        result: "partial",
                        feedback: "‚ö†Ô∏è RIGID APPROACH: While ethically sound, your inflexibility ignores potential interim solutions. Sometimes progress requires balanced compromises.",
                        coaching: "Perfect can be the enemy of good. Consider rapid improvements while working toward ideal solutions. Ethical leadership often requires creative problem-solving."
                    }
                ]
            },
            {
                title: "üïµÔ∏è Mission Gamma: The Insider Intelligence Dilemma",
                text: "A trusted colleague approaches you in the secure corridor with classified intel about a competitor's upcoming product launch. They offer to share detailed technical specifications and market strategy documents.",
                quote: "\"I have access to MegaCorp's entire Q4 strategy. This could give Analog a massive competitive advantage. No one would ever know.\"",
                details: [
                    "üéØ Intelligence could provide 6-month market advantage",
                    "üí∞ Potential revenue impact: $50M+ in new contracts",
                    "üï≥Ô∏è Source claims information was 'accidentally' shared in joint meeting",
                    "‚öñÔ∏è Legal gray area - no direct corporate espionage involved",
                    "ü§ù Could damage long-term industry relationships",
                    "üîç Risk of reputation damage if discovered"
                ],
                choices: [
                    {
                        letter: "A",
                        text: "üìà ACCEPT INTEL: Use the information strategically to gain competitive advantage",
                        result: "wrong",
                        feedback: "‚ùå CORPORATE ESPIONAGE! Even 'accidental' intelligence sharing violates ethical business practices. You've compromised Analog's integrity for short-term gains.",
                        coaching: "True competitive advantage comes from innovation and excellence, not from exploiting leaked competitor information. Ethical businesses build success on their own merits."
                    },
                    {
                        letter: "B",
                        text: "üö´ DECLINE & REDIRECT: Refuse the intel and suggest legitimate competitive research methods",
                        result: "correct",
                        feedback: "‚úÖ ETHICAL CHAMPION! You've maintained corporate integrity while suggesting legitimate alternatives. This builds long-term trust and industry respect.",
                        coaching: "Excellent ethical leadership. You've shown that winning the right way is more valuable than winning at any cost. This builds sustainable competitive advantage."
                    },
                    {
                        letter: "C",
                        text: "üìã REPORT INCIDENT: Document the offer and report it to compliance immediately",
                        result: "partial",
                        feedback: "‚ö†Ô∏è BUREAUCRATIC RESPONSE: While procedurally correct, this approach may damage internal relationships and miss the educational opportunity.",
                        coaching: "Sometimes direct ethical guidance is more effective than formal reporting. Consider coaching colleagues toward better decisions before escalating."
                    }
                ]
            }
        ];
        
        // Initialize complex background
        function createParticles() {
            const particleContainer = document.getElementById('particles');
            
            // Create blur layers matching Figma design
            const blurLayers = [
                { class: 'blur-fuchsia', width: '574px', height: '437px', left: '30%', top: '20%', blur: '32px' },
                { class: 'blur-white', width: '380px', height: '289px', left: '5%', top: '40%', blur: '32px' },
                { class: 'blur-white', width: '380px', height: '289px', left: '50%', top: '42%', blur: '32px' },
                { class: 'blur-violet', width: '532px', height: '431px', left: '20%', top: '25%', blur: '47px' },
                { class: 'blur-violet', width: '532px', height: '431px', left: '-10%', top: '35%', blur: '47px' },
                { class: 'blur-sunset', width: '400px', height: '200px', left: '60%', top: '60%', blur: '29px' }
            ];
            
            blurLayers.forEach((layer, index) => {
                const blurDiv = document.createElement('div');
                blurDiv.className = `bg-blur-layer ${layer.class}`;
                blurDiv.style.width = layer.width;
                blurDiv.style.height = layer.height;
                blurDiv.style.left = layer.left;
                blurDiv.style.top = layer.top;
                blurDiv.style.filter = `blur(${layer.blur})`;
                blurDiv.style.animationDelay = (index * 0.5) + 's';
                particleContainer.appendChild(blurDiv);
            });
        }
        
        // Character selection
        function selectCharacter(character) {
            console.log('Selecting character:', character);
            selectedCharacter = character;
            
            // Remove selected class from all options
            document.querySelectorAll('.character-option').forEach(option => {
                option.classList.remove('selected');
            });
            
            // Add selected class to clicked option
            const selectedOption = document.querySelector(`[data-character="${character}"]`);
            if (selectedOption) {
                selectedOption.classList.add('selected');
            }
            
            // Update player info
            const charData = characters[character];
            console.log('Character data:', charData);
            
            if (charData) {
                const avatar = document.getElementById('player-avatar');
                const name = document.getElementById('player-name');
                const title = document.getElementById('player-title');
                
                if (avatar) avatar.textContent = charData.avatar;
                if (name) name.textContent = charData.name;
                if (title) title.textContent = charData.title;
                
                // Enable start button
                const startButton = document.getElementById('start-mission');
                if (startButton) {
                    startButton.disabled = false;
                    startButton.removeAttribute('disabled');
                    startButton.style.opacity = '1';
                    startButton.style.pointerEvents = 'auto';
                    console.log('Start button enabled - disabled attribute removed');
                } else {
                    console.error('Start button not found!');
                }
            } else {
                console.error('Character data not found for:', character);
            }
        }
        
        // Start the game
        function startMission() {
            console.log('Start Mission clicked! Selected character:', selectedCharacter);
            
            if (!selectedCharacter) {
                console.error('No character selected!');
                alert('Please select a character first!');
                return;
            }
            
            const welcomeScreen = document.getElementById('welcome-screen');
            if (welcomeScreen) {
                console.log('Hiding welcome screen...');
                welcomeScreen.classList.remove('active');
            } else {
                console.error('Welcome screen not found!');
            }
            
            console.log('Showing mission...');
            showMission();
        }
        
        // Display current mission
        function showMission() {
            if (currentQuestion >= missions.length) {
                showFinalScreen();
                return;
            }
            
            const mission = missions[currentQuestion];
            document.getElementById('scenario-title').textContent = mission.title;
            document.getElementById('scenario-text').textContent = mission.text;
            
            if (mission.quote) {
                document.getElementById('scenario-quote').style.display = 'block';
                document.getElementById('scenario-quote').textContent = mission.quote;
            }
            
            let detailsHtml = '<div style="margin: 20px 0;"><strong>üìã Mission Data:</strong><ul style="margin: 10px 0 0 20px;">';
            mission.details.forEach(detail => {
                detailsHtml += `<li style="margin: 8px 0; color: #e0e0e0;">${detail}</li>`;
            });
            detailsHtml += '</ul></div>';
            document.getElementById('scenario-details').innerHTML = detailsHtml;
            
            // Create choice cards
            const choicesGrid = document.getElementById('choices-grid');
            choicesGrid.innerHTML = '';
            
            mission.choices.forEach((choice, index) => {
                const choiceCard = document.createElement('div');
                choiceCard.className = 'choice-card';
                choiceCard.innerHTML = `
                    <span class="choice-letter">${choice.letter}</span>
                    <span class="choice-text">${choice.text}</span>
                `;
                choiceCard.onclick = () => selectChoice(index, choiceCard);
                choicesGrid.appendChild(choiceCard);
            });
            
            document.getElementById('question-screen').classList.add('active');
            updateProgress();
        }
        
        // Select a choice
        function selectChoice(index, element) {
            document.querySelectorAll('.choice-card').forEach(card => {
                card.classList.remove('selected');
            });
            element.classList.add('selected');
            selectedChoice = index;
            document.getElementById('proceed-to-betting').disabled = false;
        }
        
        // Proceed to betting phase
        function proceedToBetting() {
            document.getElementById('question-screen').classList.remove('active');
            document.getElementById('betting-screen').classList.add('active');
            
            // Update bet options based on current credits
            document.querySelectorAll('.bet-card').forEach(card => {
                const bet = card.dataset.bet;
                if (bet !== 'all' && parseInt(bet) > credits) {
                    card.style.opacity = '0.3';
                    card.style.pointerEvents = 'none';
                } else {
                    card.style.opacity = '1';
                    card.style.pointerEvents = 'auto';
                }
            });
        }
        
        // Select betting amount
        function selectBet(amount) {
            document.querySelectorAll('.bet-card').forEach(card => {
                card.classList.remove('selected');
            });
            event.target.closest('.bet-card').classList.add('selected');
            selectedBet = amount;
            document.getElementById('execute-decision').disabled = false;
        }
        
        // Execute the decision and show results
        function executeDecision() {
            const mission = missions[currentQuestion];
            const choice = mission.choices[selectedChoice];
            const betAmount = selectedBet === 'all' ? credits : selectedBet;
            
            let creditChange = 0;
            let resultIcon = '';
            let resultTitle = '';
            let resultClass = '';
            
            // Calculate results
            if (choice.result === 'correct') {
                correctAnswers++;
                if (selectedBet === 'all') {
                    creditChange = credits;
                    credits *= 2;
                } else {
                    creditChange = betAmount;
                    credits += betAmount;
                }
                resultIcon = 'üéØ';
                resultTitle = '‚úÖ MISSION SUCCESS!';
                resultClass = 'success';
            } else if (choice.result === 'wrong') {
                creditChange = -betAmount;
                credits = Math.max(0, credits - betAmount);
                resultIcon = 'üí•';
                resultTitle = '‚ùå MISSION COMPROMISED!';
                resultClass = 'failure';
            } else { // partial
                creditChange = 0;
                resultIcon = '‚ö†Ô∏è';
                resultTitle = '‚ö†Ô∏è PARTIAL SUCCESS';
                resultClass = 'partial';
            }
            
            // Handle bankruptcy
            if (credits === 0) {
                credits = 25; // Emergency backup credits
                creditChange = 25;
                resultTitle += ' - EMERGENCY BACKUP ACTIVATED!';
            }
            
            // Show result modal
            document.getElementById('betting-screen').classList.remove('active');
            showResultModal(resultIcon, resultTitle, choice.feedback, choice.coaching, creditChange);
            updateCreditsDisplay();
        }
        
        // Show result modal
        function showResultModal(icon, title, description, coaching, creditChange) {
            document.getElementById('result-icon').textContent = icon;
            document.getElementById('result-title').textContent = title;
            document.getElementById('result-description').textContent = description;
            document.getElementById('coaching-text').textContent = coaching;
            
            let creditText = '';
            let creditColor = '';
            if (creditChange > 0) {
                creditText = `+${creditChange} Credits Earned! üí∞`;
                creditColor = '#00ff00';
            } else if (creditChange < 0) {
                creditText = `${creditChange} Credits Lost! üí∏`;
                creditColor = '#ff4444';
            } else {
                creditText = 'No Credit Change';
                creditColor = '#ffaa00';
            }
            
            const creditChangeEl = document.getElementById('credit-change');
            creditChangeEl.textContent = creditText;
            creditChangeEl.style.color = creditColor;
            
            document.getElementById('result-modal').classList.add('active');
        }
        
        // Continue to next mission
        function continueMission() {
            document.getElementById('result-modal').classList.remove('active');
            selectedChoice = null;
            selectedBet = null;
            currentQuestion++;
            showMission();
        }
        
        // Show final results
        function showFinalScreen() {
            document.getElementById('result-modal').classList.remove('active');
            
            let rank = 'Digital Apprentice';
            let rankColor = '#ff4444';
            let message = '';
            let riskScore = 'D';
            
            const successRate = Math.round((correctAnswers / missions.length) * 100);
            
            if (credits >= 200) {
                rank = 'üèÜ Digital Ethics Master';
                rankColor = '#ffd700';
                message = 'üéâ LEGENDARY PERFORMANCE! You have mastered the art of ethical decision-making in the digital realm. Your balanced approach to risk and principles makes you a true leader in the field.';
                riskScore = 'S+';
            } else if (credits >= 150) {
                rank = 'üéñÔ∏è Senior Digital Analyst';
                rankColor = '#00ff00';
                message = '‚≠ê EXCELLENT WORK! You demonstrate strong ethical judgment with room for more confident decision-making. Push your limits when you\'re certain!';
                riskScore = 'A';
            } else if (credits >= 100) {
                rank = 'üéØ Certified Analyst';
                rankColor = '#00aaff';
                message = 'üëç SOLID PERFORMANCE! You maintained stability while learning. Consider taking more calculated risks when you have high confidence in your analysis.';
                riskScore = 'B';
            } else if (credits >= 50) {
                rank = 'üìö Ethics Student';
                rankColor = '#ffaa00';
                message = 'üìñ LEARNING IN PROGRESS! Review the AI coaching tips and practice your risk assessment skills. Every expert was once a beginner!';
                riskScore = 'C';
            } else {
                rank = 'üå± Digital Apprentice';
                rankColor = '#ff6666';
                message = 'üöÄ GROWTH OPPORTUNITY! The digital ethics frontier is challenging, but every failure teaches valuable lessons. Retry the missions with new insights!';
                riskScore = 'D';
            }
            
            document.getElementById('final-credits').textContent = credits;
            document.getElementById('success-rate').textContent = successRate + '%';
            document.getElementById('risk-score').textContent = riskScore;
            document.getElementById('final-rank').textContent = rank;
            document.getElementById('final-rank').style.background = `linear-gradient(135deg, ${rankColor}, ${rankColor}88)`;
            document.getElementById('final-message').innerHTML = `<p style="font-size: 1.2em; line-height: 1.6;">${message}</p>`;
            
            document.getElementById('final-screen').classList.add('active');
            updateProgress(100);
        }
        
        // Update credits display
        function updateCreditsDisplay() {
            document.getElementById('coin-amount').textContent = credits;
        }
        
        // Update progress bar
        function updateProgress(override) {
            const progress = override !== undefined ? override : (currentQuestion / missions.length) * 100;
            document.getElementById('progress-fill').style.width = progress + '%';
            document.getElementById('progress-text').textContent = `${currentQuestion}/${missions.length}`;
        }
        
        // Restart the game
        function restartMission() {
            currentQuestion = 0;
            credits = 100;
            selectedChoice = null;
            selectedBet = null;
            correctAnswers = 0;
            selectedCharacter = null;
            
            // Reset UI
            document.getElementById('final-screen').classList.remove('active');
            document.getElementById('welcome-screen').classList.add('active');
            document.querySelectorAll('.character-option').forEach(option => {
                option.classList.remove('selected');
            });
            document.getElementById('start-mission').disabled = true;
            
            // Reset player display
            document.getElementById('player-avatar').textContent = 'üë§';
            document.getElementById('player-name').textContent = 'Agent Rookie';
            document.getElementById('player-title').textContent = 'Ethics Trainee';
            
            updateCreditsDisplay();
            updateProgress(0);
        }
        
        // Initialize the game
        document.addEventListener('DOMContentLoaded', function() {
            console.log('DOM Content Loaded - Initializing game...');
            createParticles();
            updateCreditsDisplay();
            updateProgress(0);
            
            // Add backup event listener for start mission button
            const startButton = document.getElementById('start-mission');
            if (startButton) {
                console.log('Adding backup event listener to start button');
                startButton.addEventListener('click', function(e) {
                    console.log('Start button clicked via event listener');
                    if (!startButton.disabled) {
                        startMission();
                    } else {
                        console.log('Button is disabled, please select a character first');
                    }
                });
            }
            
            // Add character selection event listeners as backup
            document.querySelectorAll('.character-option').forEach((option, index) => {
                const character = option.getAttribute('data-character');
                console.log(`Adding backup listener to character: ${character}`);
                option.addEventListener('click', function(e) {
                    console.log(`Character ${character} clicked via event listener`);
                    selectCharacter(character);
                });
            });
        });
    </script>
</body>
</html>